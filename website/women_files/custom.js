var cookieController=function(){function a(a){var b="; "+document.cookie,c=b.split("; "+a+"=");if(2==c.length)return c.pop().split(";").shift()}return{getCookie:a}}(jQuery),deviceController=function(){function a(){return parseInt($(window).width())<d.tabletWidth}function b(){var a=window.screen;return window.devicePixelRatio=window.devicePixelRatio||a.deviceXDPI/a.logicalXDPI,window.devicePixelRatio}function c(){return window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3}var d={tabletWidth:1023,deviceRetinaWidth:2e3};return{getDPI:b,isHighDensity:c,isTablet:a}}(jQuery),domainController=function(){function a(){var a=null;return window.location.origin?a=document.location.origin:(a=window.location.protocol+"//"+window.location.hostname,window.location.port&&(a+=":"+window.location.port)),a}function b(a){var b=!1;return a.search("shop.mango.com")===-1&&(b=!0),b}return{getURLDomain:a,isTestDomain:b}}(jQuery),effectsController=function(a){function b(b){var c=a("body"),d=a("#submenuContainer"),e=a(".headerContent"),f=a(".headerMNG .banners");if(b===!0)if(c.hasClass("isMobile")){var g=f.height();f.css("margin-top",-g)}else e.addClass("stickyMenu"),d.addClass("stickyMenu"),d.removeClass("selected"),menuController.setLineSelectedMenu();else e.removeClass("stickyMenu"),d.removeClass("stickyMenu")}function c(b){var c=a("body"),d=null;b===!0?(c.addClass("noBannersH"),c.removeClass("bannersH"),c.hasClass("shopMNG")&&(d=c.hasClass("transparentMenuTestB")?0:e(),helperController.addStyleElemToHead(".noBannersH .main-content.container-fluid {top:0px!important; margin-top: "+d+"px!important; position: relative}"))):b===!1&&(c.addClass("bannersH"),c.removeClass("noBannersH"),c.hasClass("shopMNG")&&(d=c.hasClass("isMobile")?e():0,helperController.addStyleElemToHead(".bannersH .main-content.container-fluid {top:0px!important; margin-top: "+d+"px!important;}")))}function d(b){var c=a("body");b===!0?(c.removeClass("hideH"),c.addClass("showH")):b===!1&&(c.removeClass("showH"),c.addClass("hideH"),c.hasClass("shopMNG")&&a(".main-content").css("margin-top",""))}function e(){var b,c=a("body");if(c.hasClass("isDesktop")||c.hasClass("isTablet"))b=a("#navMain").outerHeight();else{b=a(".headerMobile").outerHeight();var d=a("#smartbanner");d.length>0&&(b+=d.outerHeight())}return b}function f(b){var c=a("body");b===!0?(c.removeClass("hideF"),c.addClass("showF")):b===!1&&(c.removeClass("showF"),c.addClass("hideF"))}return{miniH:b,noBannersH:c,showH:d,showF:f,headerHeight:e}}(jQuery),formValidationController=function(a){function b(){c()}function c(){a("body").on("focusin",".form-validate-js",function(){g(a(this))}),a("body").on("focusout",".form-validate-js",function(){var b=a(this);if(h(b),d(b))e(b);else{f(b);var c="form-checkout "+a(".xwing-opened").attr("id")+"-error",g=b.data("component-id");0===g.indexOf("cvc")&&(g="cvc"),analyticsEvent(c,"inline validation",g,0,!0)}})}function d(a){var b=a.data("validate-validator"),c=a.prop("disabled"),d=a.val(),e=!0;if(void 0!==a.data("validate-checkbox"))a.is(":checked")||(e=!1);else{if(void 0!==b&&""!==b&&""!==d&&c===!1){var f=new RegExp(b,"i");e=f.test(d)}a.data("validate-required")&&""===d&&c===!1&&(e=!1)}return e}function e(b){var c=b.closest(".form-element"),d=a('[data-component-id="error-'+b.data("component-id")+'"]');c.hasClass("error")&&c.removeClass("error"),d.addClass("hiddenError")}function f(b){var c=b.closest(".form-element"),d=a('[data-component-id="error-'+b.data("component-id")+'"]');c.hasClass("error")||(c.addClass("error"),d.removeClass("hiddenError")),b.data("validate-required")&&""===b.val()&&b.prop("disabled")===!1?d.html(b.data("validate-requiredmessage")):d.html(b.data("validate-validatormessage"))}function g(b){var c=a('[data-component-id="suggest-'+b.data("component-id")+'"]');try{c.hasClass("show")||c.addClass("show")}catch(d){}}function h(b){var c=a('[data-component-id="suggest-'+b.data("component-id")+'"]');try{c.hasClass("show")&&c.removeClass("show")}catch(d){}}function i(b){var c=b.find(".form-validate-js"),g=c.length,h=!1,i=!1;if(g>0){for(var j=0;j<g;j++)d(a(c[j]))?(h=!0,e(a(c[j]))):(h=!1,i=!0,f(a(c[j])));i&&(h=!1)}else h=!0;return h}return{init:b,checkForm:i}}(jQuery),gaController=function(a){return analyticsEvent=function(a,b,c,d,e){var f=d;""!==f&&"0"!==f&&null!==f||(f=0),dataLayer.push({event:"analyticsEvent",eventCategory:a,eventAction:b,eventLabel:c,eventValue:f}),e?ga("send","event",a,b,c,f,{nonInteraction:1}):ga("send","event",a,b,c,f)},analyticsSocial=function(a,b,c,d){dataLayer.push({event:"social",socialNetwork:a,socialAction:b,socialTarget:c,socialPagePath:d}),ga("send","social",a,b,c,{page:d})},analyticsVPV=function(a){dataLayer.push({event:"analyticsVPV",vpvName:a}),"busqueda"!=dataLayerV2Json.page.pageType&&ga("set",{page:a}),ga("send","pageview")},analyticsForm=function(a,b){var c=a,d=b.name||b.id||b.type,e="interaction",f="form: "+c,g=d+":"+b.type;analyticsEvent(e,f,g)},{analyticsEvent:analyticsEvent,analyticsSocial:analyticsSocial,analyticsVPV:analyticsVPV,analyticsForm:analyticsForm}}(jQuery);analyticsEvent=function(a,b,c,d,e){gaController.analyticsEvent(a,b,c,d,e)},analyticsSocial=function(a,b,c,d){gaController.analyticsSocial(a,b,c,d)},analyticsVPV=function(a){gaController.analyticsVPV(a)},analyticsForm=function(a,b){gaController.analyticsForm(a,b)};var gaFavoriteController=function(){function a(a){"undefined"==typeof a&&(a=!1),i()&&!a||j().done(function(a){f(a.totalElements),h("isSent",!0),h("num",a.totalElements)})}function b(a){h("num",a),f(a)}function c(){try{h("num",g("num")+1),f(g("num"))}catch(a){j().done(function(a){f(a.totalElements)})}}function d(){try{h("num",g("num")-1),f(g("num"))}catch(a){j().done(function(a){f(a.totalElements)})}}function e(a){j().done(function(b){a(b.totalElements)})}function f(a){ga("set",{dimension29:a}),dataLayer.push({"user.favoritesNumber":a})}function g(a){return JSON.parse(window.sessionStorage.eventFavorites)[a]}function h(a,b){try{var c=JSON.parse(window.sessionStorage.eventFavorites);c[a]=b,window.sessionStorage.eventFavorites=JSON.stringify(c)}catch(d){}}function i(){if("undefined"==typeof window.sessionStorage.eventFavorites)try{window.sessionStorage.eventFavorites='{"isSent": false, "num": 0}'}catch(a){return!1}return JSON.parse(window.sessionStorage.eventFavorites).isSent}function j(){return $.ajax({url:domainController.getURLDomain()+"/ws-favorites/favorites/v1/favorites?pais="+dataLayerV2Json.shop.countryISO+"&page=0&size=20",xhrFields:{withCredentials:!0},cache:!1})}return{sendNumFavorites:a,setNumFavorites:b,addFavorites:c,removeFavorites:d,getNumFavorites:e}}(jQuery);!function(a){var b=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=b,c}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(i){}e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var j="";for(var k in f)f[k]&&(j+="; "+k,f[k]!==!0&&(j+="="+f[k]));return document.cookie=b+"="+e+j}b||(g={});for(var l=document.cookie?document.cookie.split("; "):[],m=/(%[0-9A-Z]{2})+/g,n=0;n<l.length;n++){var o=l[n].split("="),p=o.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var q=o[0].replace(m,decodeURIComponent);if(p=c.read?c.read(p,q):c(p,q)||p.replace(m,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(i){}if(b===q){g=p;break}b||(g[q]=p)}catch(i){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})}),$(document).ready(function(){try{var a=new Cookies;if(!$("body").hasClass("tele_true")&&void 0!==a.mangoShopCookie){var b=a.mangoShopCookie,c=b.split("_")[2];void 0===sessionStorage.isUserLogged?sessionStorage.isUserLogged=dataLayerV2Json.user.logged:"false"===sessionStorage.isUserLogged&&""!==c?(sessionStorage.isUserLogged=!0,gaFavoriteController.sendNumFavorites(!0)):"true"===sessionStorage.isUserLogged&&""===c&&(sessionStorage.isUserLogged=!1)}}catch(d){}});var LOGS=[],helperController=function(a){function b(){a(".modal__link").on("click",function(b){b.preventDefault();var c=a(this),d=c.data("target"),e=c.attr("href");f(d,e)})}function c(b,c){a(".loadingPanel").length<1?d(b,c):e(b,c)}function d(b,c){var d=a("body");d.append('<div class="loadingPanel"><div class="loadingPanel__object"></div></div>'),a(".loadingPanel").addClass("active")}function e(b,c){a(".loadingPanel").fadeOut(400,function(){a(".loadingPanel").remove()})}function f(b,c){var d="."+b,e=a("body");if("linkNews"==b||"linkWish"==b){"linkNews"==b?analyticsEvent("modal-politica-privacidad","newsletter","show"):"linkWish"==b&&analyticsEvent("modal-politica-privacidad","aviso disponibilidad","show"),e.append('<div class="containerModal '+b+'"><div class="backgroundModal"></div><div class="'+b+'"><div class="'+b+'__header"><a href="#" class="closeModal"><span class="icon">c</span></a></div><div class="'+b+'__body"><div class="'+b+'__footer"></div></div></div>'),e.addClass(b);var f=dataLayerV2Json.shop.countryISO,h=dataLayerV2Json.shop.languageISO;k("class",b+"__body","/cms/privacy/privacy"+f+"-"+h+".html")}else e.append('<div class="containerModal"><div class="backgroundModal"></div><div class="'+b+'"><div class="'+b+'__header"><a href="#" class="closeModal"><span class="icon">c</span></a></div><div class="'+b+'__body"><iframe src="'+c+'" /></div><div class="'+b+'__footer"></div></div></div>');a(d).show(400),a(".closeModal,.backgroundModal").on("click",function(a){a.preventDefault(),g()})}function g(b){a(".containerModal").fadeOut(400,function(){a(".containerModal").remove()});var c=a("body");b!==!1&&(c.hasClass("linkNews")?(analyticsEvent("modal-politica-privacidad","newsletter","close"),c.removeClass("linkNews")):c.hasClass("linkWish")&&(analyticsEvent("modal-politica-privacidad","aviso disponibilidad","close"),c.removeClass("linkWish")))}function h(a){if(document.createEvent){var b=document.createEvent("MouseEvents");b.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a[0].dispatchEvent(b)}else element.fireEvent&&a[0].fireEvent("onmousedown")}function i(b){a(window).on("pageshow",function(a){a.originalEvent.persisted&&b()})}function j(a,b){var c=document.createElement("style");c.type="text/css",c.innerHTML=a,c.id=b+"-style";var d=document.getElementById(b+"-style");null!==d&&d.parentNode.removeChild(d),document.getElementsByTagName("head")[0].appendChild(c)}function k(b,c,d){"class"==b?a("."+c).load(""+d):"id"==b&&a("#"+c).load(""+d)}function l(){a("#blockBackGround").addClass("abierto")}function m(){a(".main-contentContainer").addClass("container-full-centered-loading")}function n(){a(".main-contentContainer").removeClass("container-full-centered-loading")}function o(){a("[data-cms-url]").filter(function(){helperController.addContent("id",a(this).attr("id"),a(this).data("cms-url"))})}function p(b){a("title").html(b)}function q(){var b=a("body");b.hasClass("disable-scroll")?(b.css("overflow",""),b.removeClass("disable-scroll")):(b.css("overflow","hidden"),b.addClass("disable-scroll"))}function r(){a("html").addClass("add-horizontal-scroll")}function s(){b()}var t=location.href;return t.indexOf("//shop.mango.com")===-1&&t.indexOf("//shop.pre.mango.com")===-1&&t.indexOf("//www.mangooutlet.com")===-1&&t.indexOf("//www.pre.mangooutlet.com")===-1||"undefined"!=typeof console&&(console=console||{},console.log=function(a){for(var b="---- ",c=0;c<arguments.length;c++)b+=arguments[c]+" ";b+=" ----\n",LOGS.push(b)}),{init:s,manageLoaderPanel:c,modalOpen:f,modalClose:g,openSystemSelect:h,refreshPage:i,addStyleElemToHead:j,addContent:k,showBackgroundModal:l,mostrarInfoPopup:m,ocultarInfoPopup:n,renderCMSText:o,updateHeadTitle:p,manageScroll:q,addXScroll:r}}(jQuery),settingsManager=function(a){function b(){c(),d(),e()}function c(){if(navigator){var a=navigator.userAgent;null!==a.match(/(iPhone|iPod|iPad)/)&&(s=!0),null!==a.match(/(Android)/)&&(t=!0),null!==a.match(/(Windows Phone|Windows CE)/)&&(u=!0),null!==a.match(/(BlackBerry|BB10)/)&&(v=!0)}}function d(){l=a(window).width(),l<m&&(s||t||u||v)?o=!0:l>=m&&(o=!1,s||t||u||v||(q=!0,l>n&&(r=!0)))}function e(){var b=a("body");s&&b.addClass("iDevice"),t&&b.addClass("aDevice"),o?b.addClass("isMobile"):p?b.addClass("isTablet"):q&&(b.addClass("isDesktop"),r&&b.addClass("isLDesktop")),g()}function f(){return d(),e(),o}function g(){var b=a("body");return b.hasClass("isTablet")&&(p=!0),p===!0&&b.removeClass("isMobile"),p}function h(){return s}function i(){return t}function j(){return a("body").hasClass("isPortable")}function k(){return a("header").length>0}var l=null,m="768",n="2100",o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v=!1;return{init:b,isMobile:f,isTablet:g,isiDevice:h,isaDevice:i,isPortable:j,existsHeader:k}}(jQuery),storageController=function(){function a(a){try{var b=window[a],c="__storage_test__";return b.setItem(c,c),b.removeItem(c),!0}catch(d){return!1}}function b(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b}return{webStorageAvailable:a,objectSize:b}}(jQuery),styleController=function(a){function b(a,b){var c=document.createElement("style"),d=document.getElementById(a+"-style");c.type="text/css",c.innerHTML=b,c.id=a+"-style",d&&d.parentNode.removeChild(d),document.getElementsByTagName("head")[0].appendChild(c)}return{addStylesInHead:b}}(jQuery),swiperController=function(){function a(a,b){""!==a&&(d=a),""!==b&&(c=b)}function b(a,b){return""!==a&&(a=d),""!==b&&(b=c),new Swiper(b,a)}var c=".swiper-container",d={pagination:".swiper-pagination",paginationClickable:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"};return{init:a,addSwiper:b}}(jQuery),bannerController=function(a){function b(b,c){a("."+b+"-js").length>0?d(b):e(b,c)}function c(b){a("."+b+"-js").remove()}function d(b){var c=a("."+b+"-js");c.css("top",k+"px"),setTimeout(function(){c.css("top",0)},1250)}function e(b,c){var d=a('<div class="'+b+'-js top-banner"></div>');a("#headerMNG").append(d),f(b,c)}function f(b,c){h+="&id="+c,a.getJSON(h,function(a){j=a[c][i]},"html").fail(function(){console.log("AJAX Error!")},"html").done(function(){g(b),d(b)})}function g(b){a("."+b+"-js").html(j)}var h=domainController.getURLDomain(),i=dataLayerV2Json.shop.languageISO;h+="/services/traducciones/getLabels?idioma="+i;var j,k=a("#navMain").outerHeight();return{openBanner:b,deleteBanner:c}}(jQuery),customCheckboxController=function(a){function b(){var b=a("body");b.on("click",".custom-checkbox-js:not(.custom-checkbox--disabled)",function(a){a.stopPropagation(),"checkbox"!==a.target.type&&"submit"!==a.target.type&&(a.preventDefault(),c(this))})}function c(b){var c=a(b);c.toggleClass("custom-checkbox--checked"),c.find('[data-input-id="'+c.data("input-id-parent")+'"]').trigger("click")}function d(){b()}return{init:d}}(jQuery);$(document).ready(function(){customCheckboxController.init()});var customRadioController=function(a){function b(){var b=a("body");b.on("click",".custom-radio-js > .custom-radio-header-js",function(a){a.stopPropagation(),"radio"!==a.target.type&&(a.preventDefault(),c(this))})}function c(b){var c=a("body"),d=a(b).parent(),e=d.find('input[type="radio"]').data("input-id"),f=!1;null===e&&(e=d.data("input-id-parent"),f=!0),a('*[data-input-id-parent="'+e+'"]').removeClass("custom-radio--checked"),d.addClass("custom-radio--checked"),f?c.find('input[type="radio"][data-input-id="'+d.data("input-id-parent")+'"][value="'+d.data("input-value")+'"]').trigger("click"):d.find('input[type="radio"][data-input-id="'+d.data("input-id-parent")+'"]').trigger("click")}function d(){a(".custom-radio--checked").find('input[type="radio"]').attr("checked","checked"),b()}return{init:d}}(jQuery),modalTemplateController=function(a){function b(){c(),d(),e(),i=!0}function c(){a("html").addClass("scroll-block"),a("body").addClass("scroll-block")}function d(){a("body").append(desktopMANGO.Templates.modalTemplate())}function e(){i||a("body").on("click",".modal-template-close-js",function(){f()})}function f(){a("html").removeClass("scroll-block"),a("body").removeClass("scroll-block"),a(".modal").remove()}function g(){var b=a(".modal-template-container");b.addClass("modal-template-container--loading"),b.append('<div class="modal-template-loading"></div>')}function h(){a(".modal-template-container").removeClass("modal-template-container--loading"),a(".modal-template-loading").remove()}var i=!1;return{init:b,closeModal:f,initLoading:g,removeLoading:h}}(jQuery),rangeSliderController=function(a){function b(){var b=a(".range-slider-js");d="rtl"==a("html").attr("dir");for(var e=0;e<b.length;e++)c(b.eq(e))}function c(b){b.slider({isRTL:d,range:!0,min:b.data("min-value"),max:b.data("max-value"),values:[b.data("current-min-value"),b.data("current-max-value")],slide:function(b,c){a(c.handle).find(".amount-value-js").html(c.value)}}),b.find("> .ui-slider-handle").eq(0).append('<span class="amount-value amount-value-min amount-value-js">'+b.slider("values",0)+"</span>"),b.find("> .ui-slider-handle").eq(1).append('<span class="amount-value amount-value-max amount-value-js">'+b.slider("values",1)+"</span>")}var d=null;return{init:b}}(jQuery),gdprController=function(){function a(){var a=document.querySelector("#footerMNG .newsletterFormInput");a&&a.addEventListener("focus",function(){document.addEventListener("click",b),d.slideDown()})}function b(a){var c=a.target,e=document.querySelector(".newsletterForm");do{if(c===e)return;c=c.parentNode}while(c);d.slideUp(),document.removeEventListener("click",b)}function c(){a()}var d=$("#footerMNG .gdpr");return{init:c}}();$(document).ready(function(){gdprController.init()});var searchController=function(a){function b(){c(),d(),e()}function c(){n.val("")}function d(){var a=p.hasClass("activeSearch");a&&n.val(p.html())}function e(){n.on("keyup",function(){n.val().length>0?(o.hide(),r.show()):(r.hide(),o.show())}),p.hover(function(){o.toggleClass("hover")}),o.hover(function(){p.toggleClass("hover")}),m.on("click",function(a){f()}),s.on("click",g)}function f(){if(!n.hasClass("opened")){var b=j.width()-o.width();q.width(b),k.addClass("nav-hidden"),l.addClass("nav-hidden"),n.width(b).addClass("opened").focus(),i.hasClass("isTablet")&&a("#searchBorder").width(b-10),o.addClass("hover");var c="rtl"==h.attr("dir")?"right":"left";s.css(c,b+10),s.removeClass("hidden"),h.on("click",g)}}function g(b){!n.hasClass("opened")||b.target==m[0]&&b.target.id!=s.attr("id")||0!==m.has(a(b.target)).length&&b.target.id!=s.attr("id")||(q.width(0),n.width(0).removeClass("opened"),s.addClass("hidden"),k.removeClass("nav-hidden"),l.removeClass("nav-hidden"),o.removeClass("hover"),h.off("click",g))}var h=a("html"),i=a("body"),j=a("#navTools"),k=a("#navToolsUser"),l=a("#shoppingBag"),m=a("#searcher"),n=a("#searchInput","#searcher"),o=a("#searchIcon","#searcher"),p=a("#searchLabel","#searcher"),q=a("#searchBorder","#searcher"),r=a("#buscarBoton"),s=a("#close-search");return{init:b,closeSearcher:g}}(jQuery);searchController.init(),function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled,classes:a.className}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,altSpelling:a.getAttribute("data-alt-spellings"),countrySales:a.getAttribute("data-country-sales"),html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML="true"===a.countrySales?'<span class="salesIcon icon">b</span>'+a.search_text:'<span class="salesIcon"></span>'+a.search_text,this.outerHTML(c)):""},a.prototype.result_add_group=function(a){var b,c;return(a.search_match||a.group_match)&&a.active_options>0?(b=[],b.push("group-result"),a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.innerHTML=a.search_text,this.outerHTML(c)):""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.selected?a.selected=!1:void 0);return e},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this.no_results_clear(),d=0,f=this.get_search_text(),a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp(a,"i"),c=this.get_search_regex(a),l=this.results_data,j=0,k=l.length;k>j;j++)b=l[j],b.search_match=!1,e=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(e=this.results_data[b.group_array_index],0===e.active_options&&e.search_match&&(d+=1),e.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.text,b.search_altSpelling=b.group?b.label:b.altSpelling,b.search_match=this.search_string_match(b.altSpelling,c),b.search_match&&!b.group&&(d+=1),b.search_match?(f.length&&(g=b.search_text.search(i),h=b.search_altSpelling.substr(0,g+f.length)+"</em>"+b.search_altSpelling.substr(g+f.length),b.search_altSpelling=h.substr(0,g)+"<em>"+h.substr(g)),null!=e&&(e.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>d&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.get_search_regex=function(a){var b;return b=this.search_contains?"":"^",new RegExp(b+a,"i")},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.clipboard_event_checker=function(){var a=this;return setTimeout(function(){return a.results_search()},50)},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return!(this.is_multiple&&!this.display_selected_options&&a.selected)&&(!(!this.display_disabled_options&&a.disabled)&&!a.empty)},a.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},a.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},a.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},a.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(){var b,e;b=a(this),e=b.data("chosen"),"destroy"===d&&e instanceof c?e.destroy():e instanceof c||b.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default focusElem" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),
this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},c.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("touchstart.chosen",function(b){a.container_mousedown(b)}),this.container.bind("touchend.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=a.originalEvent.deltaY||-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results();var a=this.dropdown.find(".chosen-results"),b=(this.current_selectedIndex-1)*a.find("li").first().height()+parseInt(a.css("padding-top"),10);return a.scrollTop(b),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this})},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):(d=!1,"true"===c.countrySales&&(d=!0),this.single_set_selected_text_sales(c.text,d)),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},c.prototype.single_set_selected_text_sales=function(a,b){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),b?this.selected_item.find("span").text(a).prepend('<span class="salesIcon selected icon">b</span>'):this.selected_item.find("span").text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],!this.form_field.options[b.options_index].disabled&&(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),!function(a,b,c,d){var e={verticalScrolling:!0,horizontalScrolling:!1,verticalScrollerSide:"right",showOnHover:!1,scrollIncrement:20,minScrollbarLength:40,pollChanges:!0,drawCorner:!0,drawScrollButtons:!1,clickTrackToScroll:!0,easingDuration:500,propagateWheelEvent:!0,verticalTrackClass:"vertical-track",horizontalTrackClass:"horizontal-track",horizontalHandleClass:"horizontal-handle",verticalHandleClass:"vertical-handle",scrollUpButtonClass:"scroll-up-btn",scrollDownButtonClass:"scroll-down-btn",scrollLeftButtonClass:"scroll-left-btn",scrollRightButtonClass:"scroll-right-btn",cornerClass:"scrollbar-corner",zIndex:1,addPaddingToPane:!0,horizontalHandleHTML:'<div class="left"></div><div class="right"></div>',verticalHandleHTML:'<div class="top"></div><div class="bottom"></div>'},f=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},g=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,17)},h=function(b,c){var d=a(b).css(c),e=/^-?\d+/.exec(d);return e?+e[0]:0},i=function(a){var b,c,d={width:"5px",height:"1px",overflow:"hidden",padding:"8px 0",visibility:"hidden",whiteSpace:"pre-line",font:"10px/1 serif"},e=document.createElement(a),f=document.createTextNode("a\na");for(c in d)e.style[c]=d[c];return e.appendChild(f),document.body.appendChild(e),b=e.scrollHeight<28,document.body.removeChild(e),b},j=.5*Math.PI,k=10*Math.log(2),l=function(a,b,c){var d=j/b,e=a*d;return Math.round(e*Math.cos(d*c))},m=function(a,b,c){return Math.round(a*k*Math.pow(2,-10*c/b+1)/b)},n=function(a,b,c,d){return 2*c/Math.PI*Math.asin((d-a)/b)},o=function(b){var c=a(this).data("enscroll"),d=this,e=c.settings,f=function(){var b=a(this).data("enscroll"),c=b.settings;b&&c.showOnHover&&(c.verticalScrolling&&a(b.verticalTrackWrapper).is(":visible")&&a(b.verticalTrackWrapper).stop().fadeTo(275,0),c.horizontalScrolling&&a(b.horizontalTrackWrapper).is(":visible")&&a(b.horizontalTrackWrapper).stop().fadeTo(275,0),b._fadeTimer=null)};c&&e.showOnHover&&(c._fadeTimer?clearTimeout(c._fadeTimer):(e.verticalScrolling&&a(c.verticalTrackWrapper).is(":visible")&&a(c.verticalTrackWrapper).stop().fadeTo(275,1),e.horizontalScrolling&&a(c.horizontalTrackWrapper).is(":visible")&&a(c.horizontalTrackWrapper).stop().fadeTo(275,1)),b!==!1&&(c._fadeTimer=setTimeout(function(){f.call(d)},1750)))},p=function(b,c){var d=a(b),e=d.data("enscroll"),f=d.scrollTop();e&&e.settings.verticalScrolling&&(d.scrollTop(f+c),e.settings.showOnHover&&o.call(b))},q=function(b,c){var d=a(b),e=d.data("enscroll"),f=d.scrollLeft();e&&e.settings.horizontalScrolling&&(d.scrollLeft(f+c),e.settings.showOnHover&&o.call(b))},r=function(b){if(1===b.which){var d,e,f,h,i,j,k,l,m,n=b.data.pane,p=a(n),q=p.data("enscroll"),r=!0,s=function(){r&&(f!==h&&(q._scrollingY||(q._scrollingY=!0,q._startY=p.scrollTop(),g(function(){t(p)})),e.style.top=f+"px",q._endY=f*m/l,h=f),g(s),q.settings.showOnHover&&o.call(n))},u=function(a){return r&&(f=a.clientY-j-i,f=Math.min(0>f?0:f,l)),!1},v=function(){return r=!1,c.body.style.cursor=k,this.style.cursor="",d.removeClass("dragging"),a(c.body).off("mousemove.enscroll.vertical").off("mouseup.enscroll.vertical"),a(c).off("mouseout.enscroll.vertical"),p.on("scroll.enscroll.pane",function(a){x.call(this,a)}),!1};return d=a(q.verticalTrackWrapper).find(".enscroll-track"),e=d.children().first()[0],f=parseInt(e.style.top,10),m=n.scrollHeight-(q._scrollHeightNoPadding?a(n).height():a(n).innerHeight()),i=b.clientY-a(e).offset().top,l=d.height()-a(e).outerHeight(),j=d.offset().top,p.off("scroll.enscroll.pane"),a(c.body).on({"mousemove.enscroll.vertical":u,"mouseup.enscroll.vertical":function(a){v.call(e,a)}}),a(c).on("mouseout.enscroll.vertical",function(a){a.target.nodeName&&"HTML"===a.target.nodeName.toUpperCase()&&v.call(e,a)}),d.hasClass("dragging")||(d.addClass("dragging"),k=a(c.body).css("cursor"),this.style.cursor=c.body.style.cursor="ns-resize"),g(s),!1}},s=function(b){if(1===b.which){var d,e,f,h,i,j,k,l,m,n=b.data.pane,p=a(n),q=a(n).data("enscroll"),r=!0,s=function(){r&&(f!==h&&(q._scrollingX||(q._scrollingX=!0,q._startX=p.scrollLeft(),g(function(){t(p)})),e.style.left=f+"px",q._endX=f*i/m,h=f),g(s),q.settings.showOnHover&&o.call(n))},u=function(a){return r&&(f=a.clientX-k-j,f=Math.min(0>f?0:f,m)),!1},v=function(){return r=!1,d.removeClass("dragging"),c.body.style.cursor=l,this.style.cursor="",d.removeClass("dragging"),a(c.body).off("mousemove.enscroll.horizontal").off("mouseup.enscroll.horizontal"),a(c).off("mouseout.enscroll.horizontal"),p.on("scroll.enscroll.pane",function(a){x.call(this,a)}),!1};return d=a(q.horizontalTrackWrapper).find(".enscroll-track"),e=d.children().first()[0],f=parseInt(e.style.left,10),i=n.scrollWidth-a(n).innerWidth(),j=b.clientX-a(e).offset().left,m=d.width()-a(e).outerWidth(),k=d.offset().left,p.off("scroll.enscroll.pane"),a(c.body).on({"mousemove.enscroll.horizontal":u,"mouseup.enscroll.horizontal":function(a){v.call(e,a)}}),a(c).on("mouseout.enscroll.horizontal",function(a){a.target.nodeName&&"HTML"===a.target.nodeName.toUpperCase()&&v.call(e,a)}),d.hasClass("dragging")||(d.addClass("dragging"),l=a("body").css("cursor"),this.style.cursor=c.body.style.cursor="ew-resize"),g(s),!1}},t=function(a){var b,c,d,e=a.data("enscroll"),f=e._duration;e._scrollingX===!0&&(b=e._endX-e._startX,0===b?e._scrollingX=!1:(c=a.scrollLeft(),d=n(e._startX,b,f,c),b>0?c>=e._endX||c<e._startX?e._scrollingX=!1:(q(a,Math.max(1,l(b,f,d))),g(function(){t(a)})):c<=e._endX||c>e._startX?e._scrollingX=!1:(q(a,Math.min(-1,l(b,f,d))),g(function(){t(a)})))),e._scrollingY===!0&&(b=e._endY-e._startY,0===b?e._scrollingY=!1:(c=a.scrollTop(),d=n(e._startY,b,f,c),b>0?c>=e._endY||c<e._startY?e._scrollingY=!1:(p(a,Math.max(1,l(b,f,d))),g(function(){t(a)})):c<=e._endY||c>e._startY?e._scrollingY=!1:(p(a,Math.min(-1,l(b,f,d))),g(function(){t(a)}))))},u=function(a,b){var c=a.data("enscroll"),d=a.scrollLeft(),e=a[0].scrollWidth-a.innerWidth();return!(!c.settings.horizontalScrolling||c._scrollingY)&&(c._scrollingX||(c._scrollingX=!0,c._startX=d,c._endX=c._startX,g(function(){t(a)})),c._endX=b>0?Math.min(d+b,e):Math.max(0,d+b),0>b&&d>0||b>0&&e>d)},v=function(a,b){var c=a.data("enscroll"),d=a.scrollTop(),e=a[0].scrollHeight-(c._scrollHeightNoPadding?a.height():a.innerHeight());return!(!c.settings.verticalScrolling||c._scrollingX)&&(c._scrollingY||(c._scrollingY=!0,c._startY=d,c._endY=c._startY,g(function(){t(a)})),c._endY=b>0?Math.min(d+b,e):Math.max(0,d+b),0>b&&d>0||b>0&&e>d)},w=function(b){var c,d=a(this),e=d.data("enscroll"),g=e.settings.scrollIncrement,h="deltaX"in b?-b.deltaX:"wheelDeltaX"in b?b.wheelDeltaX:0,i="deltaY"in b?-b.deltaY:"wheelDeltaY"in b?b.wheelDeltaY:"wheelDelta"in b?b.wheelDelta:0;Math.abs(h)>Math.abs(i)?(c=(h>0?-g:g)<<2,(u(d,c)||!e.settings.propagateWheelEvent)&&f(b)):(c=(i>0?-g:g)<<2,(v(d,c)||!e.settings.propagateWheelEvent)&&f(b))},x=function(){var b,c,d,e=a(this),f=e.data("enscroll");f&&(f.settings.verticalScrolling&&(c=a(f.verticalTrackWrapper).find(".enscroll-track")[0],b=c.firstChild,d=e.scrollTop()/(this.scrollHeight-(f._scrollHeightNoPadding?e.height():e.innerHeight())),d=isNaN(d)?0:d,b.style.top=d*(a(c).height()-a(b).outerHeight())+"px"),f.settings.horizontalScrolling&&(c=a(f.horizontalTrackWrapper).find(".enscroll-track")[0],b=c.firstChild,d=e.scrollLeft()/(this.scrollWidth-e.innerWidth()),d=isNaN(d)?0:d,b.style.left=d*(a(c).width()-a(b).innerWidth())+"px"))},y=function(b){var c,d=a(this),e=d.data("enscroll");if(!/(input)|(select)|(textarea)/i.test(this.nodeName)&&b.target===this&&e){switch(c=e.settings.scrollIncrement,b.keyCode){case 32:case 34:return v(d,d.height()),!1;case 33:return v(d,-d.height()),!1;case 35:return v(d,this.scrollHeight),!1;case 36:return v(d,-this.scrollHeight),!1;case 37:return u(d,-c),!1;case 38:return v(d,-c),!1;case 39:return u(d,c),!1;case 40:return v(d,c),!1}return!0}},z=function(){var b=this,d=a(b).data("enscroll").settings,e=!0,f=0,h=0,i=a(b).offset().top,j=i+a(b).outerHeight(),k=a(b).offset().left,l=k+a(b).outerWidth(),m=function(a){var b=a.pageX,c=a.pageY;f=k>b?b-k:b>l?b-l:0,h=i>c?c-i:c>j?c-j:0},n=function(){d.horizontalScrolling&&f&&q(b,parseInt(f/4,10)),d.verticalScrolling&&h&&p(b,parseInt(h/4,10)),e&&g(n)},o=function(){e=!1,a(c).off("mousemove.enscroll.pane").off("mouseup.enscroll.pane")};g(n),a(c).on({"mousemove.enscroll.pane":m,"mouseup.enscroll.pane":o})},A=function(a){var b,c,e,h,i,j,k,l=this,n=function(a){b=a.touches[0].clientX,c=a.touches[0].clientY,e||(e=c===i&&b===h?d:Math.abs(i-c)>Math.abs(h-b)?"y":"x"),f(a)},o=function(){j&&("y"===e?(p(l,i-c),k=i-c,i=c):"x"===e&&(q(l,h-b),k=h-b,h=b),g(o))},r=function(){var a=0,b=Math.abs(1.5*k);this.removeEventListener("touchmove",n,!1),this.removeEventListener("touchend",r,!1),j=!1,g(function c(){var d;a===b||j||(d=m(k,b,a),isNaN(d)||0===d||(a+=1,"y"===e?p(l,d):q(l,d),g(c)))})};1===a.touches.length&&(h=a.touches[0].clientX,i=a.touches[0].clientY,j=!0,this.addEventListener("touchmove",n,!1),this.addEventListener("touchend",r,!1),g(o))},B={reposition:function(){return this.each(function(){var b,c,d,e=a(this),f=e.data("enscroll"),g=function(a,b,c){a.style.left=b+"px",a.style.top=c+"px"};f&&(d=e.position(),b=f.corner,f.settings.verticalScrolling&&(c=f.verticalTrackWrapper,g(c,"right"===f.settings.verticalScrollerSide?d.left+e.outerWidth()-a(c).width()-h(this,"border-right-width"):d.left+h(this,"border-left-width"),d.top+h(this,"border-top-width"))),f.settings.horizontalScrolling&&(c=f.horizontalTrackWrapper,g(c,d.left+h(this,"border-left-width"),d.top+e.outerHeight()-a(c).height()-h(this,"border-bottom-width"))),b&&g(b,d.left+e.outerWidth()-a(b).outerWidth()-h(this,"border-right-width"),d.top+e.outerHeight()-a(b).outerHeight()-h(this,"border-bottom-width")))})},resize:function(){return this.each(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=a(this),s=r.data("enscroll");return!s||(b=s.settings,void(r.is(":visible")?(b.verticalScrolling&&(e=s.verticalTrackWrapper,c=r.innerHeight(),f=c/this.scrollHeight,g=a(e).find(".enscroll-track")[0],j=a(e).find("."+b.scrollUpButtonClass),k=a(e).find("."+b.scrollDownButtonClass),i=b.horizontalScrolling?c-a(s.horizontalTrackWrapper).find(".enscroll-track").outerHeight():c,i-=a(g).outerHeight()-a(g).height()+j.outerHeight()+k.outerHeight(),n=g.firstChild,p=Math.max(f*i,b.minScrollbarLength),p-=a(n).outerHeight()-a(n).height(),e.style.display="none",g.style.height=i+"px",n.style.height=p+"px",1>f&&(f=r.scrollTop()/(this.scrollHeight-r.height()),n.style.top=f*(i-p)+"px",e.style.display="block")),b.horizontalScrolling&&(e=s.horizontalTrackWrapper,d=r.innerWidth(),f=d/this.scrollWidth,g=a(e).find(".enscroll-track")[0],l=a(e).find("."+b.scrollLeftButtonClass),m=a(e).find("."+b.scrollRightButtonClass),h=b.verticalScrolling?d-a(s.verticalTrackWrapper).find(".enscroll-track").outerWidth():d,h-=a(g).outerWidth()-a(g).width()+l.outerWidth()+m.outerWidth(),n=g.firstChild,o=Math.max(f*h,b.minScrollbarLength),o-=a(n).outerWidth()-a(n).width(),e.style.display="none",g.style.width=h+"px",n.style.width=o+"px",1>f&&(f=r.scrollLeft()/(this.scrollWidth-r.width()),n.style.left=f*(h-o)+"px",e.style.display="block"),s._prybar&&(q=s._prybar,this.removeChild(q),b.verticalScrolling&&(q.style.width=this.scrollWidth+a(s.verticalTrackWrapper).find(".enscroll-track").outerWidth()+"px",this.appendChild(q)))),s.corner&&(s.corner.style.display=s.verticalTrackWrapper&&s.horizontalTrackWrapper&&a(s.verticalTrackWrapper).is(":visible")&&a(s.horizontalTrackWrapper).is(":visible")?"":"none")):(b.verticalScrolling&&(s.verticalTrackWrapper.style.display="none"),b.horizontalScrolling&&(s.horizontalTrackWrapper.style.display="none"),s.corner&&(s.corner.style.display="none"))))})},startPolling:function(){return this.each(function(){var b,c=a(this).data("enscroll"),d=this,e=a(d),f=-1,g=-1,h=-1,i=-1,j=function(){if(c.settings.pollChanges){var a=d.scrollWidth,k=d.scrollHeight,l=e.width(),m=e.height(),n=e.offset();(c.settings.verticalScrolling&&(m!==g||k!==i)||c.settings.horizontalScrolling&&(l!==f||a!==h))&&(h=a,i=k,B.resize.call(e)),(b.left!==n.left||b.top!==n.top||l!==f||m!==g)&&(b=n,f=l,g=m,B.reposition.call(e)),setTimeout(j,350)}};c&&(c.settings.pollChanges=!0,i=d.scrollHeight,h=d.scrollWidth,b=e.offset(),j())})},stopPolling:function(){return this.each(function(){var b=a(this).data("enscroll");b&&(b.settings.pollChanges=!1)})},destroy:function(){return this.each(function(){var c,d,e=a(this),f=e.data("enscroll");f&&(B.stopPolling.call(e),d=f._mouseScrollHandler,f.settings.verticalScrolling&&(c=f.verticalTrackWrapper,a(c).remove(),c=null),f.settings.horizontalScrolling&&(c=f.horizontalTrackWrapper,a(c).remove(),c=null),f._fadeTimer&&clearTimeout(f._fadeTimer),f.corner&&a(f.corner).remove(),f._prybar&&f._prybar.parentNode&&f._prybar.parentNode===this&&a(f._prybar).remove(),this.setAttribute("style",f._style||""),f._hadTabIndex||e.removeAttr("tabindex"),e.off("scroll.enscroll.pane").off("keydown.enscroll.pane").off("mouseenter.enscroll.pane").off("mousedown.enscroll.pane").data("enscroll",null),this.removeEventListener?(this.removeEventListener("wheel",d,!1),this.removeEventListener("mousewheel",d,!1),this.removeEventListener("touchstart",A,!1)):this.detachEvent&&this.detachEvent("onmousewheel",d),a(b).off("resize.enscroll.window"))})}};a.fn.enscroll=function(d){var f;return B[d]?B[d].call(this):(f=a.extend({},e,d),this.each(function(){if(f.verticalScrolling||f.horizontalScrolling){var d,e,g,j,k,l,m,n,t,C,D,E,F,G,H,I,J,K,L=a(this),M=this,N=L.attr("style"),O=!0,P={position:"absolute","z-index":f.zIndex,margin:0,padding:0},Q=function(a){w.call(M,a)},R=function(b,c){"string"==typeof c?a(b).html(c):b.appendChild(c)};if(f.verticalScrolling){e=c.createElement("div"),j=c.createElement("div"),l=c.createElement("a"),a(j).css("position","relative").addClass("enscroll-track").addClass(f.verticalTrackClass).appendTo(e),f.drawScrollButtons&&(m=c.createElement("a"),n=c.createElement("a"),a(m).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").addClass(f.scrollUpButtonClass).on("click",function(){return p(M,-f.scrollIncrement),!1}).insertBefore(j),a(n).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").on("click",function(){return p(M,f.scrollIncrement),!1}).addClass(f.scrollDownButtonClass).appendTo(e)),f.clickTrackToScroll&&a(j).on("click",function(b){b.target===this&&v(L,b.pageY>a(l).offset().top?L.height():-L.height())}),a(l).css({position:"absolute","z-index":1}).attr("href","").addClass(f.verticalHandleClass).mousedown({pane:this},r).click(function(){return!1}).appendTo(j),R(l,f.verticalHandleHTML),a(e).css(P).insertAfter(this),f.showOnHover&&a(e).css("opacity",0).on("mouseover.enscroll.vertical",function(){o.call(M,!1)}).on("mouseout.enscroll.vertical",function(){o.call(M)}),E=a(j).outerWidth(),f.addPaddingToPane&&(K="right"===f.verticalScrollerSide?{"padding-right":h(this,"padding-right")+E+"px"}:{"padding-left":h(this,"padding-left")+E+"px"},L.css(a.extend({width:L.width()-E+"px"},K)));try{I=parseInt(L.css("outline-width"),10),0!==I&&!isNaN(I)||"none"!==L.css("outline-style")||L.css("outline","none")}catch(S){L.css("outline","none")}}f.horizontalScrolling&&(d=c.createElement("div"),g=c.createElement("div"),k=c.createElement("a"),a(g).css({position:"relative","z-index":1}).addClass("enscroll-track").addClass(f.horizontalTrackClass).appendTo(d),f.drawScrollButtons&&(t=c.createElement("a"),C=c.createElement("a"),a(t).css("display","block").attr("href","").on("click",function(){return q(M,-f.scrollIncrement),!1}).addClass(f.scrollLeftButtonClass).insertBefore(g),a(C).css("display","block").attr("href","").on("click",function(){return q(M,f.scrollIncrement),!1}).addClass(f.scrollRightButtonClass).appendTo(d)),f.clickTrackToScroll&&a(g).on("click",function(b){b.target===this&&u(L,b.pageX>a(k).offset().left?L.width():-L.width())}),a(k).css({position:"absolute","z-index":1}).attr("href","").addClass(f.horizontalHandleClass).click(function(){return!1}).mousedown({pane:this},s).appendTo(g),R(k,f.horizontalHandleHTML),a(d).css(P).insertAfter(this),f.showOnHover&&a(d).css("opacity",0).on("mouseover.enscroll.horizontal",function(){o.call(M,!1)}).on("mouseout.enscroll.horizontal",function(){o.call(M)}),D=a(g).outerHeight(),f.addPaddingToPane&&L.css({height:L.height()-D+"px","padding-bottom":parseInt(L.css("padding-bottom"),10)+D+"px"}),f.verticalScrolling&&(J=document.createElement("div"),a(J).css({width:"1px",height:"1px",visibility:"hidden",padding:0,margin:"-1px"}).appendTo(this))),f.verticalScrolling&&f.horizontalScrolling&&f.drawCorner&&(F=c.createElement("div"),a(F).addClass(f.cornerClass).css(P).insertAfter(this)),H=L.attr("tabindex"),H||(L.attr("tabindex",0),O=!1);try{G=L.css("outline"),
(!G||G.length<1)&&L.css("outline","none")}catch(S){L.css("outline","none")}L.on({"scroll.enscroll.pane":function(a){x.call(this,a)},"keydown.enscroll.pane":y,"mousedown.enscroll.pane":z}).css("overflow","hidden").data("enscroll",{settings:f,horizontalTrackWrapper:d,verticalTrackWrapper:e,corner:F,_prybar:J,_mouseScrollHandler:Q,_hadTabIndex:O,_style:N,_scrollingX:!1,_scrollingY:!1,_startX:0,_startY:0,_endX:0,_endY:0,_duration:parseInt(f.easingDuration/16.66666,10),_scrollHeightNoPadding:i(this.nodeName)}),a(b).on("resize.enscroll.window",function(){B.reposition.call(L)}),f.showOnHover&&L.on("mouseenter.enscroll.pane",function(){o.call(this)}),this.addEventListener?("onwheel"in this||"WheelEvent"in b&&navigator.userAgent.toLowerCase().indexOf("msie")>=0?this.addEventListener("wheel",Q,!1):"onmousewheel"in this&&this.addEventListener("mousewheel",Q,!1),this.addEventListener("touchstart",A,!1)):this.attachEvent&&this.attachEvent("onmousewheel",Q),f.pollChanges&&B.startPolling.call(L),B.resize.call(L),B.reposition.call(L)}}))}}(jQuery,window,document),function(a){"use strict";function b(){v(!0)}var c={};a.respond=c,c.update=function(){};var d=[],e=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),f=function(a,b){var c=e();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},g=function(a){return a.replace(c.regex.minmaxwh,"").match(c.regex.other)};if(c.ajax=f,c.queue=d,c.unsupportedmq=g,c.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},c.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var h,i,j,k=a.document,l=k.documentElement,m=[],n=[],o=[],p={},q=30,r=k.getElementsByTagName("head")[0]||l,s=k.getElementsByTagName("base")[0],t=r.getElementsByTagName("link"),u=function(){var a,b=k.createElement("div"),c=k.body,d=l.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=k.createElement("body"),c.style.background="none"),l.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&l.insertBefore(c,l.firstChild),a=b.offsetWidth,f?l.removeChild(c):c.removeChild(b),l.style.fontSize=d,e&&(c.style.fontSize=e),a=j=parseFloat(a)},v=function(b){var c="clientWidth",d=l[c],e="CSS1Compat"===k.compatMode&&d||k.body[c]||d,f={},g=t[t.length-1],p=(new Date).getTime();if(b&&h&&q>p-h)return a.clearTimeout(i),void(i=a.setTimeout(v,q));h=p;for(var s in m)if(m.hasOwnProperty(s)){var w=m[s],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?j||u():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?j||u():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(n[w.rules]))}for(var C in o)o.hasOwnProperty(C)&&o[C]&&o[C].parentNode===r&&r.removeChild(o[C]);o.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=k.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,r.insertBefore(E,g.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(k.createTextNode(F)),o.push(E)}},w=function(a,b,d){var e=a.replace(c.regex.comments,"").replace(c.regex.keyframes,"").match(c.regex.media),f=e&&e.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=function(a){return a.replace(c.regex.urls,"$1"+b+"$2$3")},i=!f&&d;b.length&&(b+="/"),i&&(f=1);for(var j=0;f>j;j++){var k,l,o,p;i?(k=d,n.push(h(a))):(k=e[j].match(c.regex.findStyles)&&RegExp.$1,n.push(RegExp.$2&&h(RegExp.$2))),o=k.split(","),p=o.length;for(var q=0;p>q;q++)l=o[q],g(l)||m.push({media:l.split("(")[0].match(c.regex.only)&&RegExp.$2||"all",rules:n.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(c.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(c.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}v()},x=function(){if(d.length){var b=d.shift();f(b.href,function(c){w(c,b.href,b.media),p[b.href]=!0,a.setTimeout(function(){x()},0)})}},y=function(){for(var b=0;b<t.length;b++){var c=t[b],e=c.href,f=c.media,g=c.rel&&"stylesheet"===c.rel.toLowerCase();e&&g&&!p[e]&&(c.styleSheet&&c.styleSheet.rawCssText?(w(c.styleSheet.rawCssText,e,f),p[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!s||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),d.push({href:e,media:f})))}x()};y(),c.update=y,c.getEmValue=u,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this),$(function(){var a=navigator.userAgent,b=/Edge/i.test(a),c=function(c){this.origHtmlMargin=parseFloat($("html").css("margin-top")),this.options=$.extend({},$.smartbanner.defaults,c);var d=navigator.standalone;if(this.options.force?this.type=this.options.force:null!==a.match(/Windows Phone/i)&&null!==a.match(/Edge|Touch/i)?this.type="windows":null!==a.match(/iPhone|iPod/i)||a.match(/iPad/)&&this.options.iOSUniversalApp?null!==a.match(/Safari/i)&&(null!==a.match(/CriOS/i)||window.Number(a.substr(a.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):a.match(/\bSilk\/(.*\bMobile Safari\b)?/)||a.match(/\bKF\w/)||a.match("Kindle Fire")?this.type="kindle":null!==a.match(/Android/i)&&(this.type="android"),this.type&&!d&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?$(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var e=$("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(e.length){if("windows"==this.type)b&&(this.appId=$('meta[name="msApplication-PackageEdgeName"]').attr("content")),this.appId||(this.appId=$('meta[name="msApplication-PackageFamilyName"]').attr("content"));else{var f=/app-id=([^\s,]+)/.exec(e.attr("content"));if(!f)return;this.appId=f[1]}this.title=this.options.title?this.options.title:e.data("title")||$("title").text().replace(/\s*[|\-].*$/,""),this.author=this.options.author?this.options.author:e.data("author")||($('meta[name="author"]').length?$('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=e.data("icon-url"),this.price=e.data("price"),"function"==typeof this.options.onInstall?this.options.onInstall=this.options.onInstall:this.options.onInstall=function(){},"function"==typeof this.options.onClose?this.options.onClose=this.options.onClose:this.options.onClose=function(){},this.create(),this.show(),this.listen()}}};c.prototype={constructor:c,create:function(){var a,c=this.price||this.options.price,d=this.options.url||function(){switch(this.type){case"android":return"market://details?id=";case"kindle":return"amzn://apps/android?asin=";case"windows":return b?"ms-windows-store://pdp/?productid=":"ms-windows-store:navigate?appid="}return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"}.call(this)+this.appId,e=c?function(){var a=c+" - ";switch(this.type){case"android":return a+this.options.inGooglePlay;case"kindle":return a+this.options.inAmazonAppStore;case"windows":return a+this.options.inWindowsStore}return a+this.options.inAppStore}.call(this):"",f=null==this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.options.GooglePlayParams&&(d+="&referrer="+this.options.GooglePlayParams);var g='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+e+'</span></div><a href="'+d+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?$(this.options.appendToSelector).append(g):$(this.options.appendToSelector).prepend(g),this.options.icon?a=this.options.icon:this.iconUrl?a=this.iconUrl:$('link[rel="apple-touch-icon-precomposed"]').length>0?(a=$('link[rel="apple-touch-icon-precomposed"]').attr("href"),null==this.options.iconGloss&&(f=!1)):$('link[rel="apple-touch-icon"]').length>0?a=$('link[rel="apple-touch-icon"]').attr("href"):$('meta[name="msApplication-TileImage"]').length>0?a=$('meta[name="msApplication-TileImage"]').attr("content"):$('meta[name="msapplication-TileImage"]').length>0&&(a=$('meta[name="msapplication-TileImage"]').attr("content")),a?($("#smartbanner .sb-icon").css("background-image","url("+a+")"),f&&$("#smartbanner .sb-icon").addClass("gloss")):$("#smartbanner").addClass("no-icon"),this.bannerHeight=$("#smartbanner").outerHeight()+2,this.scale>1&&($("#smartbanner").css("top",parseFloat($("#smartbanner").css("top"))*this.scale).css("height",parseFloat($("#smartbanner").css("height"))*this.scale).hide(),$("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",$(window).width()/this.scale)),$("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){$("#smartbanner .sb-close").on("click",$.proxy(this.close,this)),$("#smartbanner .sb-button").on("click",$.proxy(this.install,this))},show:function(a){var b=$("#smartbanner");if(b.stop(),this.options.layer)b.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),$(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",a);else if($.support.transition){b.animate({top:0},this.options.speedIn).addClass("shown");var c=function(){$("html").removeClass("sb-animation"),a&&a()};$(this.pushSelector).addClass("sb-animation").one($.support.transition.end,c).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else b.slideDown(this.options.speedIn).addClass("shown")},hide:function(a){var b=$("#smartbanner");if(b.stop(),this.options.layer)b.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),$(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",a);else if($.support.transition){"android"!==this.type?b.css("top",-1*this.bannerHeight*this.scale).removeClass("shown"):b.css({display:"none"}).removeClass("shown");var c=function(){$("html").removeClass("sb-animation"),a&&a()};$(this.pushSelector).addClass("sb-animation").one($.support.transition.end,c).css("margin-top",this.origHtmlMargin)}else b.slideUp(this.options.speedOut).removeClass("shown")},close:function(a){a.preventDefault(),this.hide(),$("#benefits").show(),adjustHeaderMobile(),this.setCookie("sb-closed","true",this.options.daysHidden),this.options.onClose(a)},install:function(a){this.options.hideOnInstall&&(this.hide(),$("#benefits").show(),adjustHeaderMobile()),this.setCookie("sb-installed","true",this.options.daysReminder),this.options.onInstall(a)},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),b=encodeURI(b)+(null==c?"":"; expires="+d.toUTCString()),document.cookie=a+"="+b+"; path=/;"},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return decodeURI(d);return null},switchType:function(){var a=this;this.hide(function(){a.type="android"==a.type?"ios":"android";var b=$("android"==a.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");a.appId=/app-id=([^\s,]+)/.exec(b)[1],$("#smartbanner").detach(),a.create(),a.show()})}},$.smartbanner=function(a){var b=$(window),d=b.data("smartbanner"),e="object"==typeof a&&a;d||b.data("smartbanner",d=new c(e)),"string"==typeof a&&d[a]()},$.smartbanner.defaults={title:"MANGO",author:"MANGO MNG",description:"FREE",openAppButtonText:"OPEN",downloadAppButtonText:"DOWNLOAD",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:null,inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:"//st2.mngbcn.com/static/images/androidApp/mango-logo.webp",iconGloss:null,button:"DOWNLOAD",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:1,daysReminder:0,force:"android",hideOnInstall:!0,layer:!1,iOSUniversalApp:!1,appendToSelector:".headerMNG",pushSelector:"body"},$.smartbanner.Constructor=c}),!function(a,b){a.Choices=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="/assets/scripts/dist/",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(2),j=d(i),k=c(3),l=d(k),m=c(4),n=d(m),o=c(31),p=c(32);c(33);var q=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-choice]",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(this,a),(0,p.isType)("String",b)){var d=document.querySelectorAll(b);if(d.length>1)for(var e=1;e<d.length;e++){var f=d[e];new a(f,c)}}var h={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:p.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",addItemText:function(a){return'Press Enter to add <b>"'+a+'"</b>'},maxItemText:function(a){return"Only "+a+" values can be added."},uniqueItemText:"Only unique values can be added.",classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},fuseOptions:{include:"score"},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:"item-choice"},this.config=(0,p.extend)(h,c),"auto"!==this.config.renderSelectedChoices&&"always"!==this.config.renderSelectedChoices&&(this.config.silent||console.warn("renderSelectedChoices: Possible values are 'auto' and 'always'. Falling back to 'auto'."),this.config.renderSelectedChoices="auto"),this.store=new n["default"](this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue="",this.element=b,this.passedElement=(0,p.isType)("String",b)?document.querySelector(b):b,!this.passedElement)return void(this.config.silent||console.error("Passed element not found"));this.isTextElement="text"===this.passedElement.type,this.isSelectOneElement="select-one"===this.passedElement.type,this.isSelectMultipleElement="select-multiple"===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/)),this.isScrollingOnIe=!1,this.config.shouldSortItems===!0&&this.isSelectOneElement&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false.")),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute("placeholder"))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,p.generateId)(this.passedElement,"choices-"),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0;var i="classList"in document.documentElement;i||this.config.silent||console.error("Choices: Your browser doesn't support Choices");var j=(0,p.isElement)(this.passedElement)&&this.isValidElementType;if(j){if("active"===this.passedElement.getAttribute("data-choice"))return;this.init()}else this.config.silent||console.error("Incompatible input passed")}return h(a,[{key:"init",value:function(){if(this.initialised!==!0){var a=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),a&&(0,p.isType)("Function",a)&&a.call(this)}}},{key:"destroy",value:function(){if(this.initialised!==!1){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute("tabindex");var a=this.passedElement.getAttribute("data-choice-orig-style");Boolean(a)?(this.passedElement.removeAttribute("data-choice-orig-style"),this.passedElement.setAttribute("style",a)):this.passedElement.removeAttribute("style"),this.passedElement.removeAttribute("aria-hidden"),this.passedElement.removeAttribute("data-choice"),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:"renderGroups",value:function(a,b,c){var d=this,e=c||document.createDocumentFragment(),f=this.config.sortFilter;return this.config.shouldSort&&a.sort(f),a.forEach(function(a){var c=b.filter(function(b){return d.isSelectOneElement?b.groupId===a.id:b.groupId===a.id&&!b.selected});if(c.length>=1){var f=d._getTemplate("choiceGroup",a);e.appendChild(f),d.renderChoices(c,e,!0)}}),e}},{key:"renderChoices",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=b||document.createDocumentFragment(),g=this.config,h=g.renderSelectedChoices,i=g.searchResultLimit,j=g.renderChoiceLimit,k=this.isSearching?p.sortByScore:this.config.sortFilter,l=function(a){var b="auto"!==h||c.isSelectOneElement||!a.selected;if(b){var d=c._getTemplate("choice",a);e.appendChild(d)}},m=a;"auto"!==h||this.isSelectOneElement||(m=a.filter(function(a){return!a.selected}));var n=m.reduce(function(a,b){return b.placeholder?a.placeholderChoices.push(b):a.normalChoices.push(b),a},{placeholderChoices:[],normalChoices:[]}),o=n.placeholderChoices,q=n.normalChoices;(this.config.shouldSort||this.isSearching)&&q.sort(k);var r=m.length,s=[].concat(f(o),f(q));this.isSearching?r=i:j>0&&!d&&(r=j);for(var t=0;t<r;t++)s[t]&&l(s[t]);return e}},{key:"renderItems",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=c||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&a.sort(this.config.sortFilter),this.isTextElement){var e=this.store.getItemsReducedToValues(a),f=e.join(this.config.delimiter);this.passedElement.setAttribute("value",f),this.passedElement.value=f}else{var g=document.createDocumentFragment();a.forEach(function(a){var c=b._getTemplate("option",a);g.appendChild(c)}),this.passedElement.innerHTML="",this.passedElement.appendChild(g)}return a.forEach(function(a){var c=b._getTemplate("item",a);d.appendChild(c)}),d}},{key:"render",value:function(){if(!this.store.isLoading()&&(this.currentState=this.store.getState(),this.currentState!==this.prevState)){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var a=this.store.getGroupsFilteredByActive(),b=this.store.getChoicesFilteredByActive(),c=document.createDocumentFragment();this.choiceList.innerHTML="",this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),a.length>=1&&this.isSearching!==!0?c=this.renderGroups(a,b,c):b.length>=1&&(c=this.renderChoices(b,c));var d=this.store.getItemsFilteredByActive(),e=this._canAddItem(d,this.input.value);if(c.childNodes&&c.childNodes.length>0)e.response?(this.choiceList.appendChild(c),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate("notice",e.notice));else{var f=void 0,g=void 0;this.isSearching?(g=(0,p.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,f=this._getTemplate("notice",g,"no-results")):(g=(0,p.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,f=this._getTemplate("notice",g,"no-choices")),this.choiceList.appendChild(f)}}if(this.currentState.items!==this.prevState.items){var h=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML="",h&&h){var i=this.renderItems(h);i.childNodes&&this.itemList.appendChild(i)}}this.prevState=this.currentState}}},{key:"highlightItem",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a)return this;var c=a.id,d=a.groupId,e=d>=0?this.store.getGroupById(d):null;return this.store.dispatch((0,o.highlightItem)(c,!0)),b&&(e&&e.value?(0,p.triggerEvent)(this.passedElement,"highlightItem",{id:c,value:a.value,label:a.label,groupValue:e.value}):(0,p.triggerEvent)(this.passedElement,"highlightItem",{id:c,value:a.value,label:a.label})),this}},{key:"unhighlightItem",value:function(a){if(!a)return this;var b=a.id,c=a.groupId,d=c>=0?this.store.getGroupById(c):null;return this.store.dispatch((0,o.highlightItem)(b,!1)),d&&d.value?(0,p.triggerEvent)(this.passedElement,"unhighlightItem",{id:b,value:a.value,label:a.label,groupValue:d.value}):(0,p.triggerEvent)(this.passedElement,"unhighlightItem",{id:b,value:a.value,label:a.label}),this}},{key:"highlightAll",value:function(){var a=this,b=this.store.getItems();return b.forEach(function(b){a.highlightItem(b)}),this}},{key:"unhighlightAll",value:function(){var a=this,b=this.store.getItems();return b.forEach(function(b){a.unhighlightItem(b)}),this}},{key:"removeItemsByValue",value:function(a){var b=this;if(!a||!(0,p.isType)("String",a))return this;var c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.value===a&&b._removeItem(c)}),this}},{key:"removeActiveItems",value:function(a){var b=this,c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.active&&a!==c.id&&b._removeItem(c)}),this}},{key:"removeHighlightedItems",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.highlighted&&c.active&&(a._removeItem(c),b&&a._triggerChange(c.value))}),this}},{key:"showDropdown",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=document.body,c=document.documentElement,d=Math.max(b.scrollHeight,b.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","true");var e=this.dropdown.getBoundingClientRect(),f=Math.ceil(e.top+window.scrollY+this.dropdown.offsetHeight),g=!1;return"auto"===this.config.position?g=f>=d:"top"===this.config.position&&(g=!0),g&&this.containerOuter.classList.add(this.config.classNames.flippedState),a&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,p.triggerEvent)(this.passedElement,"showDropdown",{}),this}},{key:"hideDropdown",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","false"),b&&this.containerOuter.classList.remove(this.config.classNames.flippedState),a&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,p.triggerEvent)(this.passedElement,"hideDropdown",{}),this}},{key:"toggleDropdown",value:function(){var a=this.dropdown.classList.contains(this.config.classNames.activeState);return a?this.hideDropdown():this.showDropdown(!0),this}},{key:"getValue",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.store.getItemsFilteredByActive(),d=[];return c.forEach(function(c){a.isTextElement?d.push(b?c.value:c):c.active&&d.push(b?c.value:c)}),this.isSelectOneElement?d[0]:d}},{key:"setValue",value:function(a){var b=this;if(this.initialised===!0){var c=[].concat(f(a)),d=function(a){var c=(0,p.getType)(a);if("Object"===c){if(!a.value)return;b.isTextElement?b._addItem(a.value,a.label,a.id,void 0,a.customProperties,a.placeholder):b._addChoice(a.value,a.label,!0,!1,-1,a.customProperties,a.placeholder)}else"String"===c&&(b.isTextElement?b._addItem(a):b._addChoice(a,a,!0,!1,-1,null))};c.length>1?c.forEach(function(a){d(a)}):d(c[0])}return this}},{key:"setValueByChoice",value:function(a){var b=this;if(!this.isTextElement){var c=this.store.getChoices(),d=(0,p.isType)("Array",a)?a:[a];d.forEach(function(a){var d=c.find(function(b){return b.value===a});d?d.selected?b.config.silent||console.warn("Attempting to select choice already selected"):b._addItem(d.value,d.label,d.id,d.groupId,d.customProperties,d.placeholder,d.keyCode):b.config.silent||console.warn("Attempting to select choice that does not exist")})}return this}},{key:"setChoices",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised===!0&&this.isSelectElement){if(!(0,p.isType)("Array",a)||!b)return this;e&&this._clearChoices(),this._setLoading(!0),a&&a.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),a.forEach(function(a){a.choices?d._addGroup(a,a.id||null,b,c):d._addChoice(a[b],a[c],a.selected,a.disabled,void 0,a.customProperties,a.placeholder)})),this._setLoading(!1)}return this}},{key:"clearStore",value:function(){return this.store.dispatch((0,o.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.value&&(this.input.value=""),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0))),this}},{key:"enable",value:function(){if(this.initialised){this.passedElement.disabled=!1;var a=this.containerOuter.classList.contains(this.config.classNames.disabledState);a&&(this._addEventListeners(),this.passedElement.removeAttribute("disabled"),this.input.removeAttribute("disabled"),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute("aria-disabled"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","0"))}return this}},{key:"disable",value:function(){if(this.initialised){this.passedElement.disabled=!0;var a=!this.containerOuter.classList.contains(this.config.classNames.disabledState);a&&(this._removeEventListeners(),this.passedElement.setAttribute("disabled",""),this.input.setAttribute("disabled",""),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute("aria-disabled","true"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","-1"))}return this}},{key:"ajax",value:function(a){var b=this;return this.initialised===!0&&this.isSelectElement&&(requestAnimationFrame(function(){b._handleLoadingState(!0)}),a(this._ajaxCallback())),this}},{key:"_triggerChange",value:function(a){a&&(0,p.triggerEvent)(this.passedElement,"change",{value:a})}},{key:"_handleButtonAction",value:function(a,b){if(a&&b&&this.config.removeItems&&this.config.removeItemButton){var c=b.parentNode.getAttribute("data-id"),d=a.find(function(a){return a.id===parseInt(c,10)});this._removeItem(d),this._triggerChange(d.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_selectPlaceholderChoice",value:function(){var a=this.store.getPlaceholderChoice();a&&(this._addItem(a.value,a.label,a.id,a.groupId,null,a.placeholder),this._triggerChange(a.value))}},{key:"_handleItemAction",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a&&b&&this.config.removeItems&&!this.isSelectOneElement){var e=b.getAttribute("data-id");a.forEach(function(a){a.id!==parseInt(e,10)||a.highlighted?d||a.highlighted&&c.unhighlightItem(a):c.highlightItem(a)}),document.activeElement!==this.input&&this.input.focus()}}},{key:"_handleChoiceAction",value:function(a,b){if(a&&b){var c=b.getAttribute("data-id"),d=this.store.getChoiceById(c),e=a[0]&&a[0].keyCode?a[0].keyCode:null,f=this.dropdown.classList.contains(this.config.classNames.activeState);if(d.keyCode=e,(0,p.triggerEvent)(this.passedElement,"choice",{choice:d}),d&&!d.selected&&!d.disabled){var g=this._canAddItem(a,d.value);g.response&&(this._addItem(d.value,d.label,d.id,d.groupId,d.customProperties,d.placeholder,d.keyCode),this._triggerChange(d.value))}this.clearInput(),f&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(a){if(this.config.removeItems&&a){var b=a[a.length-1],c=a.some(function(a){return a.highlighted});this.config.editItems&&!c&&b?(this.input.value=b.value,this._setInputWidth(),this._removeItem(b),this._triggerChange(b.value)):(c||this.highlightItem(b,!1),this.removeHighlightedItems(!0))}}},{key:"_canAddItem",value:function(a,b){var c=!0,d=(0,p.isType)("Function",this.config.addItemText)?this.config.addItemText(b):this.config.addItemText;(this.isSelectMultipleElement||this.isTextElement)&&this.config.maxItemCount>0&&this.config.maxItemCount<=a.length&&(c=!1,d=(0,p.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),
this.isTextElement&&this.config.addItems&&c&&this.config.regexFilter&&(c=this._regexFilter(b));var e=!a.some(function(a){return(0,p.isType)("String",b)?a.value===b.trim():a.value===b});return e||this.config.duplicateItems||this.isSelectOneElement||!c||(c=!1,d=(0,p.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(b):this.config.uniqueItemText),{response:c,notice:d}}},{key:"_handleLoadingState",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],b=this.itemList.querySelector("."+this.config.classNames.placeholder);a?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute("aria-busy","true"),this.isSelectOneElement?b?b.innerHTML=this.config.loadingText:(b=this._getTemplate("placeholder",this.config.loadingText),this.itemList.appendChild(b)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?b.innerHTML=this.placeholder||"":this.input.placeholder=this.placeholder||"")}},{key:"_ajaxCallback",value:function(){var a=this;return function(b,c,d){if(b&&c){var e=(0,p.isType)("Object",b)?[b]:b;e&&(0,p.isType)("Array",e)&&e.length?(a._handleLoadingState(!1),a._setLoading(!0),e.forEach(function(b){if(b.choices){var e=b.id||null;a._addGroup(b,e,c,d)}else a._addChoice(b[c],b[d],b.selected,b.disabled,void 0,b.customProperties,b.placeholder)}),a._setLoading(!1),a.isSelectOneElement&&a._selectPlaceholderChoice()):a._handleLoadingState(!1),a.containerOuter.removeAttribute("aria-busy")}}}},{key:"_searchChoices",value:function(a){var b=(0,p.isType)("String",a)?a.trim():a,c=(0,p.isType)("String",this.currentValue)?this.currentValue.trim():this.currentValue;if(b.length>=1&&b!==c+" "){var d=this.store.getSearchableChoices(),e=b,f=(0,p.isType)("Array",this.config.searchFields)?this.config.searchFields:[this.config.searchFields],g=Object.assign(this.config.fuseOptions,{keys:f}),h=new j["default"](d,g),i=h.search(e);return this.currentValue=b,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,o.filterChoices)(i)),i.length}return 0}},{key:"_handleSearch",value:function(a){if(a){var b=this.store.getChoices(),c=b.some(function(a){return!a.active});if(this.input===document.activeElement)if(a&&a.length>=this.config.searchFloor){var d=0;this.config.searchChoices&&(d=this._searchChoices(a)),(0,p.triggerEvent)(this.passedElement,"search",{value:a,resultCount:d})}else c&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener("focus",this._onFocus),this.containerOuter.addEventListener("blur",this._onBlur)),this.input.addEventListener("input",this._onInput),this.input.addEventListener("paste",this._onPaste),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener("focus",this._onFocus),this.containerOuter.removeEventListener("blur",this._onBlur)),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("paste",this._onPaste),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}},{key:"_setInputWidth",value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,p.getWidthOfInput)(this.input)):this.input.style.width=(0,p.getWidthOfInput)(this.input)}},{key:"_onKeyDown",value:function(a){var b,c=this;if(a.target===this.input||this.containerOuter.contains(a.target)){var d=a.target,f=this.store.getItemsFilteredByActive(),g=this.input===document.activeElement,h=this.dropdown.classList.contains(this.config.classNames.activeState),i=this.itemList&&this.itemList.children,j=String.fromCharCode(a.keyCode),k=46,l=8,m=13,n=65,o=27,q=38,r=40,s=33,t=34,u=a.ctrlKey||a.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(j)||h||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var v=function(){u&&i&&(c.canSearch=!1,c.config.removeItems&&!c.input.value&&c.input===document.activeElement&&c.highlightAll())},w=function(){if(c.isTextElement&&d.value){var b=c.input.value,e=c._canAddItem(f,b);e.response&&(h&&c.hideDropdown(),c._addItem(b),c._triggerChange(b),c.clearInput())}if(d.hasAttribute("data-button")&&(c._handleButtonAction(f,d),a.preventDefault()),h){a.preventDefault();var g=c.dropdown.querySelector("."+c.config.classNames.highlightedState);g&&(f[0]&&(f[0].keyCode=m),c._handleChoiceAction(f,g))}else c.isSelectOneElement&&(h||(c.showDropdown(!0),a.preventDefault()))},x=function(){h&&(c.toggleDropdown(),c.containerOuter.focus())},y=function(){if(h||c.isSelectOneElement){h||c.showDropdown(!0),c.canSearch=!1;var b=a.keyCode===r||a.keyCode===t?1:-1,d=a.metaKey||a.keyCode===t||a.keyCode===s,e=void 0;if(d)e=b>0?Array.from(c.dropdown.querySelectorAll("[data-choice-selectable]")).pop():c.dropdown.querySelector("[data-choice-selectable]");else{var f=c.dropdown.querySelector("."+c.config.classNames.highlightedState);e=f?(0,p.getAdjacentEl)(f,"[data-choice-selectable]",b):c.dropdown.querySelector("[data-choice-selectable]")}e&&((0,p.isScrolledIntoView)(e,c.choiceList,b)||c._scrollToChoice(e,b),c._highlightChoice(e)),a.preventDefault()}},z=function(){!g||a.target.value||c.isSelectOneElement||(c._handleBackspace(f),a.preventDefault())},A=(b={},e(b,n,v),e(b,m,w),e(b,o,x),e(b,q,y),e(b,s,y),e(b,r,y),e(b,t,y),e(b,l,z),e(b,k,z),b);A[a.keyCode]&&A[a.keyCode]()}}},{key:"_onKeyUp",value:function(a){if(a.target===this.input){var b=this.input.value,c=this.store.getItemsFilteredByActive(),d=this._canAddItem(c,b);if(this.isTextElement){var e=this.dropdown.classList.contains(this.config.classNames.activeState);if(b){if(d.notice){var f=this._getTemplate("notice",d.notice);this.dropdown.innerHTML=f.outerHTML}d.response===!0?e||this.showDropdown():!d.notice&&e&&this.hideDropdown()}else e&&this.hideDropdown()}else{var g=46,h=8;a.keyCode!==g&&a.keyCode!==h||a.target.value?this.canSearch&&d.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0)))}this.canSearch=this.config.searchEnabled}}},{key:"_onInput",value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:"_onTouchMove",value:function(){this.wasTap===!0&&(this.wasTap=!1)}},{key:"_onTouchEnd",value:function(a){var b=a.target||a.touches[0].target,c=this.dropdown.classList.contains(this.config.classNames.activeState);this.wasTap===!0&&this.containerOuter.contains(b)&&(b!==this.containerOuter&&b!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():c||this.showDropdown(!0)),a.stopPropagation()),this.wasTap=!0}},{key:"_onMouseDown",value:function(a){var b=a.target;if(b===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(b)&&b!==this.input){var c=void 0,d=this.store.getItemsFilteredByActive(),e=a.shiftKey;(c=(0,p.findAncestorByAttrName)(b,"data-button"))?this._handleButtonAction(d,c):(c=(0,p.findAncestorByAttrName)(b,"data-item"))?this._handleItemAction(d,c,e):(c=(0,p.findAncestorByAttrName)(b,"data-choice"))&&this._handleChoiceAction(d,c),a.preventDefault()}}},{key:"_onClick",value:function(a){var b=a.target,c=this.dropdown.classList.contains(this.config.classNames.activeState),d=this.store.getItemsFilteredByActive();if(this.containerOuter.contains(b))b.hasAttribute("data-button")&&this._handleButtonAction(d,b),c?this.isSelectOneElement&&b!==this.input&&!this.dropdown.contains(b)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus());else{var e=d.some(function(a){return a.highlighted});e&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),c&&this.hideDropdown()}}},{key:"_onMouseOver",value:function(a){(a.target===this.dropdown||this.dropdown.contains(a.target))&&a.target.hasAttribute("data-choice")&&this._highlightChoice(a.target)}},{key:"_onPaste",value:function(a){a.target!==this.input||this.config.paste||a.preventDefault()}},{key:"_onFocus",value:function(a){var b=this,c=a.target;if(this.containerOuter.contains(c)){var d=this.dropdown.classList.contains(this.config.classNames.activeState),e={text:function(){c===b.input&&b.containerOuter.classList.add(b.config.classNames.focusState)},"select-one":function(){b.containerOuter.classList.add(b.config.classNames.focusState),c===b.input&&(d||b.showDropdown())},"select-multiple":function(){c===b.input&&(b.containerOuter.classList.add(b.config.classNames.focusState),d||b.showDropdown(!0))}};e[this.passedElement.type]()}}},{key:"_onBlur",value:function(a){var b=this,c=a.target;if(this.containerOuter.contains(c)&&!this.isScrollingOnIe){var d=this.store.getItemsFilteredByActive(),e=this.dropdown.classList.contains(this.config.classNames.activeState),f=d.some(function(a){return a.highlighted}),g={text:function(){c===b.input&&(b.containerOuter.classList.remove(b.config.classNames.focusState),f&&b.unhighlightAll(),e&&b.hideDropdown())},"select-one":function(){b.containerOuter.classList.remove(b.config.classNames.focusState),c===b.containerOuter&&e&&!b.canSearch&&b.hideDropdown(),c===b.input&&e&&b.hideDropdown()},"select-multiple":function(){c===b.input&&(b.containerOuter.classList.remove(b.config.classNames.focusState),e&&b.hideDropdown(),f&&b.unhighlightAll())}};g[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:"_regexFilter",value:function(a){if(!a)return!1;var b=this.config.regexFilter,c=new RegExp(b.source,"i");return c.test(a)}},{key:"_scrollToChoice",value:function(a,b){var c=this;if(a){var d=this.choiceList.offsetHeight,e=a.offsetHeight,f=a.offsetTop+e,g=this.choiceList.scrollTop+d,h=b>0?this.choiceList.scrollTop+f-g:a.offsetTop,i=function j(){var a=4,d=c.choiceList.scrollTop,e=!1,f=void 0,g=void 0;b>0?(f=(h-d)/a,g=f>1?f:1,c.choiceList.scrollTop=d+g,d<h&&(e=!0)):(f=(d-h)/a,g=f>1?f:1,c.choiceList.scrollTop=d-g,d>h&&(e=!0)),e&&requestAnimationFrame(function(a){j(a,h,b)})};requestAnimationFrame(function(a){i(a,h,b)})}}},{key:"_highlightChoice",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=Array.from(this.dropdown.querySelectorAll("[data-choice-selectable]")),d=b;if(c&&c.length){var e=Array.from(this.dropdown.querySelectorAll("."+this.config.classNames.highlightedState));e.forEach(function(b){b.classList.remove(a.config.classNames.highlightedState),b.setAttribute("aria-selected","false")}),d?this.highlightPosition=c.indexOf(d):(d=c.length>this.highlightPosition?c[this.highlightPosition]:c[c.length-1],d||(d=c[0])),d.classList.add(this.config.classNames.highlightedState),d.setAttribute("aria-selected","true"),this.containerOuter.setAttribute("aria-activedescendant",d.id)}}},{key:"_addItem",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5],g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=(0,p.isType)("String",a)?a.trim():a,i=g,j=this.store.getItems(),k=b||h,l=parseInt(c,10)||-1,m=d>=0?this.store.getGroupById(d):null,n=j?j.length+1:1;return this.config.prependValue&&(h=this.config.prependValue+h.toString()),this.config.appendValue&&(h+=this.config.appendValue.toString()),this.store.dispatch((0,o.addItem)(h,k,n,l,d,e,f,i)),this.isSelectOneElement&&this.removeActiveItems(n),m&&m.value?(0,p.triggerEvent)(this.passedElement,"addItem",{id:n,value:h,label:k,groupValue:m.value,keyCode:i}):(0,p.triggerEvent)(this.passedElement,"addItem",{id:n,value:h,label:k,keyCode:i}),this}},{key:"_removeItem",value:function(a){if(!a||!(0,p.isType)("Object",a))return this;var b=a.id,c=a.value,d=a.label,e=a.choiceId,f=a.groupId,g=f>=0?this.store.getGroupById(f):null;return this.store.dispatch((0,o.removeItem)(b,e)),g&&g.value?(0,p.triggerEvent)(this.passedElement,"removeItem",{id:b,value:c,label:d,groupValue:g.value}):(0,p.triggerEvent)(this.passedElement,"removeItem",{id:b,value:c,label:d}),this}},{key:"_addChoice",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if("undefined"!=typeof a&&null!==a){var i=this.store.getChoices(),j=b||a,k=i?i.length+1:1,l=this.baseId+"-"+this.idNames.itemChoice+"-"+k;this.store.dispatch((0,o.addChoice)(a,j,k,e,d,l,f,g,h)),c&&this._addItem(a,j,k,void 0,f,g,h)}}},{key:"_clearChoices",value:function(){this.store.dispatch((0,o.clearChoices)())}},{key:"_addGroup",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"label",f=(0,p.isType)("Object",a)?a.choices:Array.from(a.getElementsByTagName("OPTION")),g=b?b:Math.floor((new Date).valueOf()*Math.random()),h=!!a.disabled&&a.disabled;f?(this.store.dispatch((0,o.addGroup)(a.label,g,!0,h)),f.forEach(function(a){var b=a.disabled||a.parentNode&&a.parentNode.disabled;c._addChoice(a[d],(0,p.isType)("Object",a)?a[e]:a.innerHTML,a.selected,b,g,a.customProperties,a.placeholder)})):this.store.dispatch((0,o.addGroup)(a.label,a.id,!1,a.disabled))}},{key:"_getTemplate",value:function(a){if(!a)return null;for(var b=this.config.templates,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b[a].apply(b,d)}},{key:"_createTemplates",value:function(){var a=this,b=this.config.classNames,c={containerOuter:function(c){return(0,p.strToEl)('\n          <div\n            class="'+b.containerOuter+'"\n            '+(a.isSelectElement?a.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':"")+'\n            data-type="'+a.passedElement.type+'"\n            '+(a.isSelectOneElement?'tabindex="0"':"")+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+c+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,p.strToEl)('\n          <div class="'+b.containerInner+'"></div>\n        ')},itemList:function(){var c,d=(0,l["default"])(b.list,(c={},e(c,b.listSingle,a.isSelectOneElement),e(c,b.listItems,!a.isSelectOneElement),c));return(0,p.strToEl)('\n          <div class="'+d+'"></div>\n        ')},placeholder:function(a){return(0,p.strToEl)('\n          <div class="'+b.placeholder+'">\n            '+a+"\n          </div>\n        ")},item:function(c){var d,f=(0,l["default"])(b.item,(d={},e(d,b.highlightedState,c.highlighted),e(d,b.itemSelectable,!c.highlighted),e(d,b.placeholder,c.placeholder),d));if(a.config.removeItemButton){var g;return f=(0,l["default"])(b.item,(g={},e(g,b.highlightedState,c.highlighted),e(g,b.itemSelectable,!c.disabled),e(g,b.placeholder,c.placeholder),g)),(0,p.strToEl)('\n            <div\n              class="'+f+'"\n              data-item\n              data-id="'+c.id+'"\n              data-value="'+c.value+'"\n              data-deletable\n              '+(c.active?'aria-selected="true"':"")+"\n              "+(c.disabled?'aria-disabled="true"':"")+"\n              >\n              "+c.label+'<!--\n           --><button\n                type="button"\n                class="'+b.button+'"\n                data-button\n                aria-label="Remove item: \''+c.value+"'\"\n                >\n                Remove item\n              </button>\n            </div>\n          ")}return(0,p.strToEl)('\n          <div\n            class="'+f+'"\n            data-item\n            data-id="'+c.id+'"\n            data-value="'+c.value+'"\n            '+(c.active?'aria-selected="true"':"")+"\n            "+(c.disabled?'aria-disabled="true"':"")+"\n            >\n            "+c.label+"\n          </div>\n        ")},choiceList:function(){return(0,p.strToEl)('\n          <div\n            class="'+b.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(a.isSelectOneElement?"":'aria-multiselectable="true"')+"\n            >\n          </div>\n        ")},choiceGroup:function(a){var c=(0,l["default"])(b.group,e({},b.itemDisabled,a.disabled));return(0,p.strToEl)('\n          <div\n            class="'+c+'"\n            data-group\n            data-id="'+a.id+'"\n            data-value="'+a.value+'"\n            role="group"\n            '+(a.disabled?'aria-disabled="true"':"")+'\n            >\n            <div class="'+b.groupHeading+'">'+a.value+"</div>\n          </div>\n        ")},choice:function(c){var d,f=(0,l["default"])(b.item,b.itemChoice,(d={},e(d,b.itemDisabled,c.disabled),e(d,b.itemSelectable,!c.disabled),e(d,b.placeholder,c.placeholder),d));return(0,p.strToEl)('\n          <div\n            class="'+f+'"\n            data-select-text="'+a.config.itemSelectText+'"\n            data-choice\n            data-id="'+c.id+'"\n            data-value="'+c.value+'"\n            '+(c.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n            id="'+c.elementId+'"\n            '+(c.groupId>0?'role="treeitem"':'role="option"')+"\n            >\n            "+c.label+"\n          </div>\n        ")},input:function(){var a=(0,l["default"])(b.input,b.inputCloned);return(0,p.strToEl)('\n          <input\n            type="text"\n            class="'+a+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var a=(0,l["default"])(b.list,b.listDropdown);return(0,p.strToEl)('\n          <div\n            class="'+a+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(a){var c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",f=(0,l["default"])(b.item,b.itemChoice,(c={},e(c,b.noResults,"no-results"===d),e(c,b.noChoices,"no-choices"===d),c));return(0,p.strToEl)('\n          <div class="'+f+'">\n            '+a+"\n          </div>\n        ")},option:function(a){return(0,p.strToEl)('\n          <option value="'+a.value+'" selected>'+a.label+"</option>\n        ")}},d=this.config.callbackOnCreateTemplates,f={};d&&(0,p.isType)("Function",d)&&(f=d.call(this,p.strToEl)),this.config.templates=(0,p.extend)(c,f)}},{key:"_setLoading",value:function(a){this.store.dispatch((0,o.setIsLoading)(a))}},{key:"_createInput",value:function(){var a=this,b=this.passedElement.getAttribute("dir")||"ltr",c=this._getTemplate("containerOuter",b),d=this._getTemplate("containerInner"),e=this._getTemplate("itemList"),f=this._getTemplate("choiceList"),g=this._getTemplate("input"),h=this._getTemplate("dropdown");this.containerOuter=c,this.containerInner=d,this.input=g,this.choiceList=f,this.itemList=e,this.dropdown=h,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex="-1";var i=this.passedElement.getAttribute("style");if(Boolean(i)&&this.passedElement.setAttribute("data-choice-orig-style",i),this.passedElement.setAttribute("style","display:none;"),this.passedElement.setAttribute("aria-hidden","true"),this.passedElement.setAttribute("data-choice","active"),(0,p.wrap)(this.passedElement,d),(0,p.wrap)(d,c),this.isSelectOneElement?g.placeholder=this.config.searchPlaceholderValue||"":this.placeholder&&(g.placeholder=this.placeholder,g.style.width=(0,p.getWidthOfInput)(g)),this.config.addItems||this.disable(),c.appendChild(d),c.appendChild(h),d.appendChild(e),this.isTextElement||h.appendChild(f),this.isSelectMultipleElement||this.isTextElement?d.appendChild(g):this.canSearch&&h.insertBefore(g,h.firstChild),this.isSelectElement){var j=Array.from(this.passedElement.getElementsByTagName("OPTGROUP"));if(this.highlightPosition=0,this.isSearching=!1,this._setLoading(!0),j&&j.length)j.forEach(function(b){a._addGroup(b,b.id||null)});else{var k=Array.from(this.passedElement.options),l=this.config.sortFilter,m=this.presetChoices;k.forEach(function(a){m.push({value:a.value,label:a.innerHTML,selected:a.selected,disabled:a.disabled||a.parentNode.disabled,placeholder:a.hasAttribute("placeholder")})}),this.config.shouldSort&&m.sort(l);var n=m.some(function(a){return a.selected});m.forEach(function(b,c){if(a.isSelectOneElement){var d=n||!n&&c>0;a._addChoice(b.value,b.label,!d||b.selected,!!d&&b.disabled,void 0,b.customProperties,b.placeholder)}else a._addChoice(b.value,b.label,b.selected,b.disabled,void 0,b.customProperties,b.placeholder)})}this._setLoading(!1)}else this.isTextElement&&this.presetItems.forEach(function(b){var c=(0,p.getType)(b);if("Object"===c){if(!b.value)return;a._addItem(b.value,b.label,b.id,void 0,b.customProperties,b.placeholder)}else"String"===c&&a._addItem(b)})}}]),a}();a.exports=q},function(a,b,c){!function(b){"use strict";function c(){console.log.apply(console,arguments)}function d(a,b){var c;this.list=a,this.options=b=b||{};for(c in h)h.hasOwnProperty(c)&&("boolean"==typeof h[c]?this.options[c]=c in b?b[c]:h[c]:this.options[c]=b[c]||h[c])}function e(a,b,c){var d,g,h,i,j,k;if(b){if(h=b.indexOf("."),h!==-1?(d=b.slice(0,h),g=b.slice(h+1)):d=b,i=a[d],null!==i&&void 0!==i)if(g||"string"!=typeof i&&"number"!=typeof i)if(f(i))for(j=0,k=i.length;j<k;j++)e(i[j],g,c);else g&&e(i,g,c);else c.push(i)}else c.push(a);return c}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b){b=b||{},this.options=b,this.options.location=b.location||g.defaultOptions.location,this.options.distance="distance"in b?b.distance:g.defaultOptions.distance,this.options.threshold="threshold"in b?b.threshold:g.defaultOptions.threshold,this.options.maxPatternLength=b.maxPatternLength||g.defaultOptions.maxPatternLength,this.pattern=b.caseSensitive?a:a.toLowerCase(),this.patternLen=a.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var h={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:g,sortFn:function(a,b){return a.score-b.score},getFn:e,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};d.VERSION="2.7.3",d.prototype.set=function(a){return this.list=a,a},d.prototype.search=function(a){this.options.verbose&&c("\nSearch term:",a,"\n"),this.pattern=a,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var b=this._format();return b},d.prototype._prepareSearchers=function(){var a=this.options,b=this.pattern,c=a.searchFn,d=b.split(a.tokenSeparator),e=0,f=d.length;if(this.options.tokenize)for(this.tokenSearchers=[];e<f;e++)this.tokenSearchers.push(new c(d[e],a));this.fullSeacher=new c(b,a)},d.prototype._startSearch=function(){var a,b,c,d,e=this.options,f=e.getFn,g=this.list,h=g.length,i=this.options.keys,j=i.length,k=null;if("string"==typeof g[0])for(c=0;c<h;c++)this._analyze("",g[c],c,c);else for(this._keyMap={},c=0;c<h;c++)for(k=g[c],d=0;d<j;d++){if(a=i[d],"string"!=typeof a){if(b=1-a.weight||1,this._keyMap[a.name]={weight:b},a.weight<=0||a.weight>1)throw new Error("Key weight has to be > 0 and <= 1");a=a.name}else this._keyMap[a]={weight:1};this._analyze(a,f(k,a,[]),k,c)}},d.prototype._analyze=function(a,b,d,e){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.options,w=!1;if(void 0!==b&&null!==b){h=[];var x=0;if("string"==typeof b){if(g=b.split(v.tokenSeparator),v.verbose&&c("---------\nKey:",a),this.options.tokenize){for(t=0;t<this.tokenSearchers.length;t++){for(n=this.tokenSearchers[t],v.verbose&&c("Pattern:",n.pattern),o=[],r=!1,u=0;u<g.length;u++){p=g[u],q=n.search(p);var y={};q.isMatch?(y[p]=q.score,w=!0,r=!0,h.push(q.score)):(y[p]=1,this.options.matchAllTokens||h.push(1)),o.push(y)}r&&x++,v.verbose&&c("Token scores:",o)}for(j=h[0],l=h.length,t=1;t<l;t++)j+=h[t];j/=l,v.verbose&&c("Token score average:",j)}m=this.fullSeacher.search(b),v.verbose&&c("Full text score:",m.score),k=m.score,void 0!==j&&(k=(k+j)/2),v.verbose&&c("Score average:",k),s=!this.options.tokenize||!this.options.matchAllTokens||x>=this.tokenSearchers.length,v.verbose&&c("Check Matches",s),(w||m.isMatch)&&s&&(i=this.resultMap[e],i?i.output.push({key:a,score:k,matchedIndices:m.matchedIndices}):(this.resultMap[e]={item:d,output:[{key:a,score:k,matchedIndices:m.matchedIndices}]},this.results.push(this.resultMap[e])))}else if(f(b))for(t=0;t<b.length;t++)this._analyze(a,b[t],d,e)}},d.prototype._computeScore=function(){var a,b,d,e,f,g,h,i,j,k=this._keyMap,l=this.results;for(this.options.verbose&&c("\n\nComputing score:\n"),a=0;a<l.length;a++){for(d=0,e=l[a].output,f=e.length,i=1,b=0;b<f;b++)g=e[b].score,h=k?k[e[b].key].weight:1,j=g*h,1!==h?i=Math.min(i,j):(d+=j,e[b].nScore=j);1===i?l[a].score=d/f:l[a].score=i,this.options.verbose&&c(l[a])}},d.prototype._sort=function(){var a=this.options;a.shouldSort&&(a.verbose&&c("\n\nSorting...."),this.results.sort(a.sortFn))},d.prototype._format=function(){var a,b,d,e,f=this.options,g=f.getFn,h=[],i=this.results,j=f.include;for(f.verbose&&c("\n\nOutput:\n\n",i),d=f.id?function(a){i[a].item=g(i[a].item,f.id,[])[0]}:function(){},e=function(a){var b,c,d,e,f,g=i[a];if(j.length>0){if(b={item:g.item},j.indexOf("matches")!==-1)for(d=g.output,b.matches=[],c=0;c<d.length;c++)e=d[c],f={indices:e.matchedIndices},e.key&&(f.key=e.key),b.matches.push(f);j.indexOf("score")!==-1&&(b.score=i[a].score)}else b=g.item;return b},a=0,b=i.length;a<b;a++)d(a),h.push(e(a));return h},g.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},g.prototype._calculatePatternAlphabet=function(){var a={},b=0;for(b=0;b<this.patternLen;b++)a[this.pattern.charAt(b)]=0;for(b=0;b<this.patternLen;b++)a[this.pattern.charAt(b)]|=1<<this.pattern.length-b-1;return a},g.prototype._bitapScore=function(a,b){var c=a/this.patternLen,d=Math.abs(this.options.location-b);return this.options.distance?c+d/this.options.distance:d?1:c},g.prototype.search=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.options;if(a=y.caseSensitive?a:a.toLowerCase(),this.pattern===a)return{isMatch:!0,score:0,matchedIndices:[[0,a.length-1]]};if(this.patternLen>y.maxPatternLength){if(s=a.match(new RegExp(this.pattern.replace(y.tokenSeparator,"|"))),t=!!s)for(v=[],b=0,w=s.length;b<w;b++)x=s[b],v.push([a.indexOf(x),x.length-1]);return{isMatch:t,score:t?.5:1,matchedIndices:v}}for(e=y.findAllMatches,f=y.location,d=a.length,g=y.threshold,h=a.indexOf(this.pattern,f),u=[],b=0;b<d;b++)u[b]=0;for(h!=-1&&(g=Math.min(this._bitapScore(0,h),g),h=a.lastIndexOf(this.pattern,f+this.patternLen),h!=-1&&(g=Math.min(this._bitapScore(0,h),g))),h=-1,q=1,r=[],k=this.patternLen+d,b=0;b<this.patternLen;b++){for(i=0,j=k;i<j;)this._bitapScore(b,f+j)<=g?i=j:k=j,j=Math.floor((k-i)/2+i);for(k=j,l=Math.max(1,f-j+1),m=e?d:Math.min(f+j,d)+this.patternLen,n=Array(m+2),n[m+1]=(1<<b)-1,c=m;c>=l;c--)if(p=this.patternAlphabet[a.charAt(c-1)],p&&(u[c-1]=1),n[c]=(n[c+1]<<1|1)&p,0!==b&&(n[c]|=(o[c+1]|o[c])<<1|1|o[c+1]),n[c]&this.matchmask&&(q=this._bitapScore(b,c-1),q<=g)){if(g=q,h=c-1,r.push(h),h<=f)break;l=Math.max(1,2*f-h)}if(this._bitapScore(b+1,f)>g)break;o=n}return v=this._getMatchedIndices(u),{isMatch:h>=0,score:0===q?.001:q,matchedIndices:v}},g.prototype._getMatchedIndices=function(a){for(var b,c=[],d=-1,e=-1,f=0,g=a.length;f<g;f++)b=a[f],b&&d===-1?d=f:b||d===-1||(e=f-1,e-d+1>=this.options.minMatchCharLength&&c.push([d,e]),d=-1);return a[f-1]&&f-1-d+1>=this.options.minMatchCharLength&&c.push([d,f-1]),c},a.exports=d}(this)},function(a,b,c){var d,e;!function(){"use strict";function c(){for(var a=[],b=0;b<arguments.length;b++){var d=arguments[b];if(d){var e=typeof d;if("string"===e||"number"===e)a.push(d);else if(Array.isArray(d))a.push(c.apply(null,d));else if("object"===e)for(var g in d)f.call(d,g)&&d[g]&&a.push(g)}}return a.join(" ")}var f={}.hasOwnProperty;"undefined"!=typeof a&&a.exports?a.exports=c:(d=[],e=function(){return c}.apply(b,d),!(void 0!==e&&(a.exports=e)))}()},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(5),i=c(26),j=d(i),k=function(){function a(){f(this,a),this.store=(0,h.createStore)(j["default"],window.devToolsExtension?window.devToolsExtension():void 0)}return g(a,[{key:"getState",value:function(){return this.store.getState()}},{key:"dispatch",value:function(a){this.store.dispatch(a)}},{key:"subscribe",value:function(a){this.store.subscribe(a)}},{key:"isLoading",value:function(){var a=this.store.getState();return a.general.loading}},{key:"getItems",value:function(){var a=this.store.getState();return a.items}},{key:"getItemsFilteredByActive",value:function(){var a=this.getItems(),b=a.filter(function(a){return a.active===!0},[]);return b}},{key:"getItemsReducedToValues",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getItems(),b=a.reduce(function(a,b){return a.push(b.value),a},[]);return b}},{key:"getChoices",value:function(){var a=this.store.getState();return a.choices}},{key:"getChoicesFilteredByActive",value:function(){var a=this.getChoices(),b=a.filter(function(a){return a.active===!0});return b}},{key:"getChoicesFilteredBySelectable",value:function(){var a=this.getChoices(),b=a.filter(function(a){return a.disabled!==!0});return b}},{key:"getSearchableChoices",value:function(){var a=this.getChoicesFilteredBySelectable();return a.filter(function(a){return a.placeholder!==!0})}},{key:"getChoiceById",value:function(a){if(a){var b=this.getChoicesFilteredByActive(),c=b.find(function(b){return b.id===parseInt(a,10)});return c}return!1}},{key:"getGroups",value:function(){var a=this.store.getState();return a.groups}},{key:"getGroupsFilteredByActive",value:function(){var a=this.getGroups(),b=this.getChoices(),c=a.filter(function(a){var c=a.active===!0&&a.disabled===!1,d=b.some(function(a){return a.active===!0&&a.disabled===!1});return c&&d},[]);return c}},{key:"getGroupById",value:function(a){var b=this.getGroups(),c=b.find(function(b){return b.id===a});return c}},{key:"getPlaceholderChoice",value:function(){var a=this.getChoices(),b=[].concat(e(a)).reverse().find(function(a){
return a.placeholder===!0});return b}}]),a}();b["default"]=k,a.exports=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0,b.compose=b.applyMiddleware=b.bindActionCreators=b.combineReducers=b.createStore=void 0;var e=c(6),f=d(e),g=c(21),h=d(g),i=c(23),j=d(i),k=c(24),l=d(k),m=c(25),n=d(m),o=c(22);d(o),b.createStore=f["default"],b.combineReducers=h["default"],b.bindActionCreators=j["default"],b.applyMiddleware=l["default"],b.compose=n["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){function d(){r===q&&(r=q.slice())}function f(){return p}function h(a){if("function"!=typeof a)throw new Error("Expected listener to be a function.");var b=!0;return d(),r.push(a),function(){if(b){b=!1,d();var c=r.indexOf(a);r.splice(c,1)}}}function k(a){if(!(0,g["default"])(a))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof a.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,p=o(p,a)}finally{s=!1}for(var b=q=r,c=0;c<b.length;c++){var d=b[c];d()}return a}function l(a){if("function"!=typeof a)throw new Error("Expected the nextReducer to be a function.");o=a,k({type:j.INIT})}function m(){var a,b=h;return a={subscribe:function(a){function c(){a.next&&a.next(f())}if("object"!=typeof a)throw new TypeError("Expected the observer to be an object.");c();var d=b(c);return{unsubscribe:d}}},a[i["default"]]=function(){return this},a}var n;if("function"==typeof b&&"undefined"==typeof c&&(c=b,b=void 0),"undefined"!=typeof c){if("function"!=typeof c)throw new Error("Expected the enhancer to be a function.");return c(e)(a,b)}if("function"!=typeof a)throw new Error("Expected the reducer to be a function.");var o=a,p=b,q=[],r=q,s=!1;return k({type:j.INIT}),n={dispatch:k,subscribe:h,getState:f,replaceReducer:l},n[i["default"]]=m,n}b.__esModule=!0,b.ActionTypes=void 0,b["default"]=e;var f=c(7),g=d(f),h=c(17),i=d(h),j=b.ActionTypes={INIT:"@@redux/INIT"}},function(a,b,c){function d(a){if(!g(a)||e(a)!=h)return!1;var b=f(a);if(null===b)return!0;var c=l.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&k.call(c)==m}var e=c(8),f=c(14),g=c(16),h="[object Object]",i=Function.prototype,j=Object.prototype,k=i.toString,l=j.hasOwnProperty,m=k.call(Object);a.exports=d},function(a,b,c){function d(a){return null==a?void 0===a?i:h:j&&j in Object(a)?f(a):g(a)}var e=c(9),f=c(12),g=c(13),h="[object Null]",i="[object Undefined]",j=e?e.toStringTag:void 0;a.exports=d},function(a,b,c){var d=c(10),e=d.Symbol;a.exports=e},function(a,b,c){var d=c(11),e="object"==typeof self&&self&&self.Object===Object&&self,f=d||e||Function("return this")();a.exports=f},function(a,b){(function(b){var c="object"==typeof b&&b&&b.Object===Object&&b;a.exports=c}).call(b,function(){return this}())},function(a,b,c){function d(a){var b=g.call(a,i),c=a[i];try{a[i]=void 0;var d=!0}catch(a){}var e=h.call(a);return d&&(b?a[i]=c:delete a[i]),e}var e=c(9),f=Object.prototype,g=f.hasOwnProperty,h=f.toString,i=e?e.toStringTag:void 0;a.exports=d},function(a,b){function c(a){return e.call(a)}var d=Object.prototype,e=d.toString;a.exports=c},function(a,b,c){var d=c(15),e=d(Object.getPrototypeOf,Object);a.exports=e},function(a,b){function c(a,b){return function(c){return a(b(c))}}a.exports=c},function(a,b){function c(a){return null!=a&&"object"==typeof a}a.exports=c},function(a,b,c){a.exports=c(18)},function(a,b,c){(function(a,d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(20),h=e(g);f="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof a?a:d;var i=(0,h["default"])(f);b["default"]=i}).call(b,function(){return this}(),c(19)(a))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b){"use strict";function c(a){var b,c=a.Symbol;return"function"==typeof c?c.observable?b=c.observable:(b=c("observable"),c.observable=b):b="@@observable",b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=b&&b.type,d=c&&'"'+c.toString()+'"'||"an action";return"Given action "+d+', reducer "'+a+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function f(a){Object.keys(a).forEach(function(b){var c=a[b],d=c(void 0,{type:h.ActionTypes.INIT});if("undefined"==typeof d)throw new Error('Reducer "'+b+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var e="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof c(void 0,{type:e}))throw new Error('Reducer "'+b+'" returned undefined when probed with a random type. '+("Don't try to handle "+h.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function g(a){for(var b=Object.keys(a),c={},d=0;d<b.length;d++){var g=b[d];"function"==typeof a[g]&&(c[g]=a[g])}var h=Object.keys(c),i=void 0;try{f(c)}catch(a){i=a}return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];if(i)throw i;for(var d=!1,f={},g=0;g<h.length;g++){var j=h[g],k=c[j],l=a[j],m=k(l,b);if("undefined"==typeof m){var n=e(j,b);throw new Error(n)}f[j]=m,d=d||m!==l}return d?f:a}}b.__esModule=!0,b["default"]=g;var h=c(6),i=c(7),j=(d(i),c(22));d(j)},function(a,b){"use strict";function c(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a);try{throw new Error(a)}catch(a){}}b.__esModule=!0,b["default"]=c},function(a,b){"use strict";function c(a,b){return function(){return b(a.apply(void 0,arguments))}}function d(a,b){if("function"==typeof a)return c(a,b);if("object"!=typeof a||null===a)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===a?"null":typeof a)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var d=Object.keys(a),e={},f=0;f<d.length;f++){var g=d[f],h=a[g];"function"==typeof h&&(e[g]=c(h,b))}return e}b.__esModule=!0,b["default"]=d},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return function(c,d,e){var g=a(c,d,e),i=g.dispatch,j=[],k={getState:g.getState,dispatch:function(a){return i(a)}};return j=b.map(function(a){return a(k)}),i=h["default"].apply(void 0,j)(g.dispatch),f({},g,{dispatch:i})}}}b.__esModule=!0;var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b["default"]=e;var g=c(25),h=d(g)},function(a,b){"use strict";function c(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 0===b.length?function(a){return a}:1===b.length?b[0]:b.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}b.__esModule=!0,b["default"]=c},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(5),f=c(27),g=d(f),h=c(28),i=d(h),j=c(29),k=d(j),l=c(30),m=d(l),n=(0,e.combineReducers)({items:g["default"],groups:i["default"],choices:k["default"],general:m["default"]}),o=function(a,b){var c=a;return"CLEAR_ALL"===b.type&&(c=void 0),n(c,b)};b["default"]=o},function(a,b){"use strict";function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_ITEM":var d=[].concat(c(a),[{id:b.id,choiceId:b.choiceId,groupId:b.groupId,value:b.value,label:b.label,active:!0,highlighted:!1,customProperties:b.customProperties,placeholder:b.placeholder||!1,keyCode:null}]);return d.map(function(a){return a.highlighted&&(a.highlighted=!1),a});case"REMOVE_ITEM":return a.map(function(a){return a.id===b.id&&(a.active=!1),a});case"HIGHLIGHT_ITEM":return a.map(function(a){return a.id===b.id&&(a.highlighted=b.highlighted),a});default:return a}};b["default"]=d},function(a,b){"use strict";function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_GROUP":return[].concat(c(a),[{id:b.id,value:b.value,active:b.active,disabled:b.disabled}]);case"CLEAR_CHOICES":return a.groups=[];default:return a}};b["default"]=d},function(a,b){"use strict";function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_CHOICE":return[].concat(c(a),[{id:b.id,elementId:b.elementId,groupId:b.groupId,value:b.value,label:b.label||b.value,disabled:b.disabled||!1,selected:!1,active:!0,score:9999,customProperties:b.customProperties,placeholder:b.placeholder||!1,keyCode:null}]);case"ADD_ITEM":var d=a;return b.activateOptions&&(d=a.map(function(a){return a.active=b.active,a})),b.choiceId>-1&&(d=a.map(function(a){return a.id===parseInt(b.choiceId,10)&&(a.selected=!0),a})),d;case"REMOVE_ITEM":return b.choiceId>-1?a.map(function(a){return a.id===parseInt(b.choiceId,10)&&(a.selected=!1),a}):a;case"FILTER_CHOICES":var e=b.results,f=a.map(function(a){return a.active=e.some(function(b){return b.item.id===a.id&&(a.score=b.score,!0)}),a});return f;case"ACTIVATE_CHOICES":return a.map(function(a){return a.active=b.active,a});case"CLEAR_CHOICES":return a.choices=[];default:return a}};b["default"]=d},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1},b=arguments[1];switch(b.type){case"LOADING":return{loading:b.isLoading};default:return a}};b["default"]=c},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.addItem=function(a,b,c,d,e,f,g,h){return{type:"ADD_ITEM",value:a,label:b,id:c,choiceId:d,groupId:e,customProperties:f,placeholder:g,keyCode:h}},b.removeItem=function(a,b){return{type:"REMOVE_ITEM",id:a,choiceId:b}},b.highlightItem=function(a,b){return{type:"HIGHLIGHT_ITEM",id:a,highlighted:b}},b.addChoice=function(a,b,c,d,e,f,g,h,i){return{type:"ADD_CHOICE",value:a,label:b,id:c,groupId:d,disabled:e,elementId:f,customProperties:g,placeholder:h,keyCode:i}},b.filterChoices=function(a){return{type:"FILTER_CHOICES",results:a}},b.activateChoices=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"ACTIVATE_CHOICES",active:a}},b.clearChoices=function(){return{type:"CLEAR_CHOICES"}},b.addGroup=function(a,b,c,d){return{type:"ADD_GROUP",value:a,id:b,active:c,disabled:d}},b.clearAll=function(){return{type:"CLEAR_ALL"}},b.setIsLoading=function(a){return{type:"LOADING",isLoading:a}}},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=(b.capitalise=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},b.generateChars=function(a){for(var b="",c=0;c<a;c++){var d=h(0,36);b+=d.toString(36)}return b}),e=(b.generateId=function(a,b){var c=a.id||a.name&&a.name+"-"+d(2)||d(4);return c=c.replace(/(:|\.|\[|\]|,)/g,""),c=b+c},b.getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)}),f=b.isType=function(a,b){var c=e(b);return void 0!==b&&null!==b&&c===a},g=(b.isNode=function(a){return"object"===("undefined"==typeof Node?"undefined":c(Node))?a instanceof Node:a&&"object"===("undefined"==typeof a?"undefined":c(a))&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},b.isElement=function(a){return"object"===("undefined"==typeof HTMLElement?"undefined":c(HTMLElement))?a instanceof HTMLElement:a&&"object"===("undefined"==typeof a?"undefined":c(a))&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},b.extend=function j(){for(var a={},b=arguments.length,c=function(b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(f("Object",b[c])?a[c]=j(!0,a[c],b[c]):a[c]=b[c])},d=0;d<b;d++){var e=arguments[d];f("Object",e)&&c(e)}return a},b.whichTransitionEvent=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]},b.whichAnimationEvent=function(){var a,b=document.createElement("fakeelement"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}),h=(b.getParentsUntil=function(a,b,c){for(var d=[];a&&a!==document;a=a.parentNode){if(b){var e=b.charAt(0);if("."===e&&a.classList.contains(b.substr(1)))break;if("#"===e&&a.id===b.substr(1))break;if("["===e&&a.hasAttribute(b.substr(1,b.length-1)))break;if(a.tagName.toLowerCase()===b)break}if(c){var f=c.charAt(0);"."===f&&a.classList.contains(c.substr(1))&&d.push(a),"#"===f&&a.id===c.substr(1)&&d.push(a),"["===f&&a.hasAttribute(c.substr(1,c.length-1))&&d.push(a),a.tagName.toLowerCase()===c&&d.push(a)}else d.push(a)}return 0===d.length?null:d},b.wrap=function(a,b){return b=b||document.createElement("div"),a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b),b.appendChild(a)},b.getSiblings=function(a){for(var b=[],c=a.parentNode.firstChild;c;c=c.nextSibling)1===c.nodeType&&c!==a&&b.push(c);return b},b.findAncestor=function(a,b){for(;(a=a.parentElement)&&!a.classList.contains(b););return a},b.findAncestorByAttrName=function(a,b){for(var c=a;c;){if(c.hasAttribute(b))return c;c=c.parentElement}return null},b.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},b.getElemDistance=function(a){var b=0;if(a.offsetParent)do b+=a.offsetTop,a=a.offsetParent;while(a);return b>=0?b:0},b.getElementOffset=function(a,b){var c=b;return c>1&&(c=1),c>0&&(c=0),Math.max(a.offsetHeight*c)},b.getAdjacentEl=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(a&&b){var d=a.parentNode.parentNode,e=Array.from(d.querySelectorAll(b)),f=e.indexOf(a),g=c>0?1:-1;return e[f+g]}},b.getScrollPosition=function(a){return"bottom"===a?Math.max((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},b.isInView=function(a,b,c){return this.getScrollPosition(b)>this.getElemDistance(a)+this.getElementOffset(a,c)},b.isScrolledIntoView=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(a){var d=void 0;return d=c>0?b.scrollTop+b.offsetHeight>=a.offsetTop+a.offsetHeight:a.offsetTop>=b.scrollTop}},b.stripHTML=function(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""},b.addAnimation=function(a,b){var c=g(),d=function e(){a.classList.remove(b),a.removeEventListener(c,e,!1)};a.classList.add(b),a.addEventListener(c,d,!1)},b.getRandomNumber=function(a,b){return Math.floor(Math.random()*(b-a)+a)}),i=b.strToEl=function(){var a=document.createElement("div");return function(b){var c=b.trim(),d=void 0;for(a.innerHTML=c,d=a.children[0];a.firstChild;)a.removeChild(a.firstChild);return d}}();b.getWidthOfInput=function(a){var b=a.value||a.placeholder,c=a.offsetWidth;if(b){var d=i("<span>"+b+"</span>");if(d.style.position="absolute",d.style.padding="0",d.style.top="-9999px",d.style.left="-9999px",d.style.width="auto",d.style.whiteSpace="pre",document.body.contains(a)&&window.getComputedStyle){var e=window.getComputedStyle(a);e&&(d.style.fontSize=e.fontSize,d.style.fontFamily=e.fontFamily,d.style.fontWeight=e.fontWeight,d.style.fontStyle=e.fontStyle,d.style.letterSpacing=e.letterSpacing,d.style.textTransform=e.textTransform,d.style.padding=e.padding)}document.body.appendChild(d),b&&d.offsetWidth!==a.offsetWidth&&(c=d.offsetWidth+4),document.body.removeChild(d)}return c+"px"},b.sortByAlpha=function(a,b){var c=(a.label||a.value).toLowerCase(),d=(b.label||b.value).toLowerCase();return c<d?-1:c>d?1:0},b.sortByScore=function(a,b){return a.score-b.score},b.triggerEvent=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=new CustomEvent(b,{detail:c,bubbles:!0,cancelable:!0});return a.dispatchEvent(d)}},function(a,b){"use strict";!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}Array.from||(Array.from=function(){var a=Object.prototype.toString,b=function(b){return"function"==typeof b||"[object Function]"===a.call(b)},c=function(a){var b=Number(a);return isNaN(b)?0:0!==b&&isFinite(b)?(b>0?1:-1)*Math.floor(Math.abs(b)):b},d=Math.pow(2,53)-1,e=function(a){var b=c(a);return Math.min(Math.max(b,0),d)};return function(a){var c=this,d=Object(a);if(null==a)throw new TypeError("Array.from requires an array-like object - not null or undefined");var f,g=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof g){if(!b(g))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(f=arguments[2])}for(var h,i=e(d.length),j=b(c)?Object(new c(i)):new Array(i),k=0;k<i;)h=d[k],g?j[k]="undefined"==typeof f?g(h,k):g.call(f,h,k):j[k]=h,k+=1;return j.length=i,j}}()),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}),a.prototype=window.Event.prototype,window.CustomEvent=a}()}])});var manageFavoritesShop=function(a){function b(b,c,d){null!==b&&void 0!==b&&a.ajax({type:"POST",contentType:"application/json",cookie:cookieController.getCookie("mangoShopCookie"),xhrFields:{withCredentials:!0},data:JSON.stringify(b),url:c+"/add",success:function(){d&&d();var b=a("html");(b.hasClass("ficha")||b.hasClass("fichaOutfit"))&&bannerController.openBanner("adding-fav","favorites_quickview_addingProductToFav")}})}function c(b,c,d){null!==b&&void 0!==b&&a.ajax({type:"POST",contentType:"application/json",cookie:cookieController.getCookie("mangoShopCookie"),xhrFields:{withCredentials:!0},data:JSON.stringify(b),url:c+"/remove",success:function(){d&&d()}})}function d(){var b=a(".selected-color"),c=b.data("fav"),d=a("#productPageAddFavorite");c===!1?(d.attr("data-fav",!1),d.data("fav",!1),d.addClass("favFalse"),d.removeClass("favTrue")):c===!0&&(d.attr("data-fav",!0),d.data("fav",!0),d.addClass("favTrue"),d.removeClass("favFalse"))}function e(){a(".productPage-fav-container-js").each(function(){var b=a(this),c=b.parents(".optionsSelect__container").find(".selected-color-js").data("fav");c===!1?(b.attr("data-fav",!1),b.data("fav",!1)):c===!0&&(b.attr("data-fav",!0),b.data("fav",!0))})}function f(a,b,c,d){"add"===b?gaFavoriteController.getNumFavorites(function(b){var e={event:"addToFavorites",eventCategory:a,eventAction:"anadir a favoritos",eventLabel:c,user:{favoritesNumber:b}};d&&(e.ecommerce={addToFavorites:{actionField:{list:d.list},products:[{id:d.id,name:d.name,price:d.price,brand:d.brand,category:d.category,colorId:d.colorId,variant:d.variant,dimension21:d.colorId,list:d.list,position:d.position}]}}),dataLayer.push(e),ga("send","event",a,"anadir a favoritos",c,{metric9:1,dimension29:b})}):"remove"===b&&gaFavoriteController.getNumFavorites(function(b){dataLayer.push({event:"removeFromFavorites",eventCategory:a,eventAction:"eliminar de favoritos",eventLabel:c,user:{favoritesNumber:b}}),ga("send","event",a,"eliminar de favoritos",c,{metric15:1,dimension29:b})})}return{addFavorite:b,removeFavorite:c,checkProductPage:d,checkOutfitPage:e,favMetrics:f}}(jQuery);